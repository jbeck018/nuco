"use strict";exports.id=4917,exports.ids=[4917],exports.modules={4835:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Ct:()=>l,HC:()=>o,Pu:()=>c,b3:()=>m,cE:()=>r,dK:()=>u});var i=a(58025),d=a(29657),s=e([i,d]);[i,d]=s.then?(await s)():s;let l=(0,i.pgTable)("slack_event_types",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),name:(0,i.text)("name").notNull().unique(),description:(0,i.text)("description"),category:(0,i.text)("category").notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull()}),r=(0,i.pgTable)("slack_events",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),eventTypeId:(0,i.uuid)("event_type_id").references(()=>l.id,{onDelete:"cascade"}).notNull(),integrationId:(0,i.uuid)("integration_id").references(()=>d.integrations.id,{onDelete:"cascade"}).notNull(),userId:(0,i.uuid)("user_id").references(()=>d.users.id,{onDelete:"cascade"}),organizationId:(0,i.uuid)("organization_id").references(()=>d.organizations.id,{onDelete:"cascade"}),slackUserId:(0,i.text)("slack_user_id"),slackChannelId:(0,i.text)("slack_channel_id"),slackTeamId:(0,i.text)("slack_team_id"),timestamp:(0,i.timestamp)("timestamp",{mode:"date"}).defaultNow().notNull(),metadata:(0,i.jsonb)("metadata")}),o=(0,i.pgTable)("slack_usage_metrics",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),integrationId:(0,i.uuid)("integration_id").references(()=>d.integrations.id,{onDelete:"cascade"}).notNull(),organizationId:(0,i.uuid)("organization_id").references(()=>d.organizations.id,{onDelete:"cascade"}),metricName:(0,i.text)("metric_name").notNull(),metricValue:(0,i.integer)("metric_value").notNull(),timeframe:(0,i.text)("timeframe").notNull(),startDate:(0,i.timestamp)("start_date",{mode:"date"}).notNull(),endDate:(0,i.timestamp)("end_date",{mode:"date"}).notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()}),u=(0,i.pgTable)("slack_user_activity",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),integrationId:(0,i.uuid)("integration_id").references(()=>d.integrations.id,{onDelete:"cascade"}).notNull(),slackUserId:(0,i.text)("slack_user_id").notNull(),slackUserName:(0,i.text)("slack_user_name"),lastActive:(0,i.timestamp)("last_active",{mode:"date"}),totalInteractions:(0,i.integer)("total_interactions").default(0).notNull(),commandsUsed:(0,i.integer)("commands_used").default(0).notNull(),messagesReceived:(0,i.integer)("messages_received").default(0).notNull(),messagesSent:(0,i.integer)("messages_sent").default(0).notNull(),reactionsReceived:(0,i.integer)("reactions_received").default(0).notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()}),c=(0,i.pgTable)("slack_channel_activity",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),integrationId:(0,i.uuid)("integration_id").references(()=>d.integrations.id,{onDelete:"cascade"}).notNull(),slackChannelId:(0,i.text)("slack_channel_id").notNull(),slackChannelName:(0,i.text)("slack_channel_name"),totalInteractions:(0,i.integer)("total_interactions").default(0).notNull(),commandsUsed:(0,i.integer)("commands_used").default(0).notNull(),messagesReceived:(0,i.integer)("messages_received").default(0).notNull(),messagesSent:(0,i.integer)("messages_sent").default(0).notNull(),uniqueUsers:(0,i.integer)("unique_users").default(0).notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()}),m=(0,i.pgTable)("slack_ai_performance",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),integrationId:(0,i.uuid)("integration_id").references(()=>d.integrations.id,{onDelete:"cascade"}).notNull(),messageId:(0,i.text)("message_id").notNull(),slackUserId:(0,i.text)("slack_user_id"),slackChannelId:(0,i.text)("slack_channel_id"),promptLength:(0,i.integer)("prompt_length"),responseLength:(0,i.integer)("response_length"),responseTime:(0,i.integer)("response_time"),modelUsed:(0,i.text)("model_used"),feedbackRating:(0,i.integer)("feedback_rating"),feedbackComment:(0,i.text)("feedback_comment"),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull()});n()}catch(e){n(e)}})},4905:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{$u:()=>r,LN:()=>u,UN:()=>o});var i=a(58025),d=a(53142),s=a(18577),l=e([i,d,s]);[i,d,s]=l.then?(await l)():l;let r=(0,i.pgTable)("organization_settings",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),organizationId:(0,i.uuid)("organization_id").notNull().references(()=>d.Z.id,{onDelete:"cascade"}),defaultIntegrations:(0,i.jsonb)("default_integrations").$type(),memberDefaultRole:(0,i.varchar)("member_default_role",{length:20}).default("member").notNull(),slackSettings:(0,i.jsonb)("slack_settings").$type(),aiSettings:(0,i.jsonb)("ai_settings").$type(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()},e=>({organizationIdIndex:(0,i.index)("organization_settings_organization_id_idx").on(e.organizationId)})),o=(0,s.aJ)(r),u=(0,s.r)(r);n()}catch(e){n(e)}})},5772:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{D:()=>r,S:()=>o});var i=a(58025),d=a(11737),s=a(56050),l=e([i,d,s]);[i,d,s]=l.then?(await l)():l;let r=(0,i.pgTable)("messages",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),conversationId:(0,i.uuid)("conversation_id").notNull().references(()=>s.N.id,{onDelete:"cascade"}),role:(0,i.text)("role").notNull(),content:(0,i.text)("content").notNull(),tokens:(0,i.integer)("tokens"),modelId:(0,i.text)("model_id"),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull()}),o=(0,d.relations)(r,({one:e})=>({conversation:e(s.N,{fields:[r.conversationId],references:[s.N.id]})}));n()}catch(e){n(e)}})},17729:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{il:()=>r,yu:()=>l,zG:()=>o});var i=a(58025),d=a(18577),s=e([i,d]);[i,d]=s.then?(await s)():s;let l=(0,i.pgTable)("metadata",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),entityType:(0,i.varchar)("entity_type",{length:50}).notNull(),entityId:(0,i.uuid)("entity_id").notNull(),key:(0,i.varchar)("key",{length:100}).notNull(),value:(0,i.jsonb)("value").notNull().$type(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()},e=>({entityTypeIndex:(0,i.index)("metadata_entity_type_idx").on(e.entityType),entityIdIndex:(0,i.index)("metadata_entity_id_idx").on(e.entityId),keyIndex:(0,i.index)("metadata_key_idx").on(e.key),entityTypeIdKeyIndex:(0,i.index)("metadata_entity_type_id_key_idx").on(e.entityType,e.entityId,e.key)})),r=(0,d.r)(l),o=(0,d.aJ)(l);n()}catch(e){n(e)}})},21236:(e,t,a)=>{a.a(e,async(e,t)=>{try{var n=a(56473),i=a(87007),d=a(57855),s=a(29657),l=e([n,s]);[n,s]=l.then?(await l)():l,(0,d.config)({path:".env"});let r=(0,i.lw)(process.env.DATABASE_URL);(0,n.drizzle)({client:r,schema:s}),t()}catch(e){t(e)}})},29657:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{accounts:()=>i.v,accountsRelations:()=>i.g,apiTokens:()=>d.T,apiTokensRelations:()=>d.Q,authenticators:()=>I.P,conversations:()=>s.N,conversationsRelations:()=>s.y,embeddings:()=>l.V,embeddingsRelations:()=>l.c,extensionLogs:()=>o.zl,extensionMarketplace:()=>o.Dp,extensionReviews:()=>o.FF,extensionStorage:()=>o.p1,extensions:()=>o.XO,insertIntegrationSettingsSchema:()=>b.oZ,insertMetadataSchema:()=>m.il,insertOrganizationSettingsSchema:()=>v.LN,insertUserPreferencesSchema:()=>w.UV,integrationSettings:()=>b.KA,integrationTypeEnum:()=>r.wN,integrations:()=>u.G,integrationsRelations:()=>u.B,messages:()=>c.D,messagesRelations:()=>c.S,metadata:()=>m.yu,organizationMembers:()=>p.N,organizationMembersRelations:()=>p.q,organizationRoleEnum:()=>r.tn,organizationSettings:()=>v.$u,organizations:()=>g.Z,organizationsRelations:()=>g.c,promptTemplates:()=>N.M,promptTemplatesRelations:()=>N.d,roleEnum:()=>r.a6,selectIntegrationSettingsSchema:()=>b.DQ,selectMetadataSchema:()=>m.zG,selectOrganizationSettingsSchema:()=>v.UN,selectUserPreferencesSchema:()=>w.$E,sessions:()=>f.M,sessionsRelations:()=>f.R,slackAIPerformance:()=>_.b3,slackChannelActivity:()=>_.Pu,slackEventTypes:()=>_.Ct,slackEvents:()=>_.cE,slackUsageMetrics:()=>_.HC,slackUserActivity:()=>_.dK,usageRecords:()=>x.o,usageRecordsRelations:()=>x.j,userPreferences:()=>w.KY,users:()=>y.V,usersRelations:()=>y.m,verificationTokens:()=>h.E});var i=a(88900),d=a(68937),s=a(56050),l=a(55710),r=a(79544),o=a(77302),u=a(41167),c=a(5772),m=a(17729),p=a(85633),g=a(53142),N=a(47884),f=a(53189),_=a(4835),y=a(59249),x=a(30386),h=a(35034),v=a(4905),b=a(93012),w=a(79948),I=a(94720),k=e([i,d,s,l,r,o,u,c,m,p,g,N,f,_,y,x,h,v,b,w,I]);[i,d,s,l,r,o,u,c,m,p,g,N,f,_,y,x,h,v,b,w,I]=k.then?(await k)():k,n()}catch(e){n(e)}})},30386:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{j:()=>o,o:()=>r});var i=a(58025),d=a(11737),s=a(59249),l=e([i,d,s]);[i,d,s]=l.then?(await l)():l;let r=(0,i.pgTable)("usage_records",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),userId:(0,i.uuid)("user_id").notNull().references(()=>s.V.id,{onDelete:"cascade"}),type:(0,i.varchar)("type",{length:50}).notNull(),count:(0,i.integer)("count").notNull(),date:(0,i.timestamp)("date",{mode:"date"}).defaultNow().notNull(),metadata:(0,i.json)("metadata"),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull()}),o=(0,d.relations)(r,({one:e})=>({user:e(s.V,{fields:[r.userId],references:[s.V.id]})}));n()}catch(e){n(e)}})},30960:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{gD:()=>u,py:()=>o});var i=a(21236),d=a(29657),s=a(11737),l=a(88474),r=e([i,d,s,l]);function o(e){return!!e&&"free"!==e}function u(e){return!!e&&["active","trialing"].includes(e)}[i,d,s,l]=r.then?(await r)():r,n()}catch(e){n(e)}})},35034:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{E:()=>s});var i=a(58025),d=e([i]);i=(d.then?(await d)():d)[0];let s=(0,i.pgTable)("verification_tokens",{identifier:(0,i.text)("identifier").notNull(),token:(0,i.text)("token").notNull(),expires:(0,i.timestamp)("expires",{mode:"date"}).notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull()},e=>({compoundKey:(0,i.primaryKey)({columns:[e.identifier,e.token]})}));n()}catch(e){n(e)}})},41167:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{B:()=>c,G:()=>u});var i=a(58025),d=a(11737),s=a(79544),l=a(53142),r=a(59249),o=e([i,d,s,l,r]);[i,d,s,l,r]=o.then?(await o)():o;let u=(0,i.pgTable)("integrations",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),userId:(0,i.uuid)("user_id").notNull().references(()=>r.V.id,{onDelete:"cascade"}),organizationId:(0,i.uuid)("organization_id").references(()=>l.Z.id,{onDelete:"cascade"}),type:(0,s.wN)("type").notNull(),name:(0,i.text)("name").notNull(),config:(0,i.json)("config").notNull(),isActive:(0,i.boolean)("is_active").default(!0).notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull(),lastSyncedAt:(0,i.timestamp)("last_synced_at",{mode:"date"})}),c=(0,d.relations)(u,({one:e})=>({user:e(r.V,{fields:[u.userId],references:[r.V.id]}),organization:e(l.Z,{fields:[u.organizationId],references:[l.Z.id]})}));n()}catch(e){n(e)}})},47884:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{M:()=>o,d:()=>u});var i=a(58025),d=a(11737),s=a(53142),l=a(59249),r=e([i,d,s,l]);[i,d,s,l]=r.then?(await r)():r;let o=(0,i.pgTable)("prompt_templates",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),name:(0,i.text)("name").notNull(),description:(0,i.text)("description"),content:(0,i.text)("content").notNull(),variables:(0,i.json)("variables").default([]),tags:(0,i.json)("tags").default([]),isPublic:(0,i.boolean)("is_public").default(!1),userId:(0,i.uuid)("user_id").notNull().references(()=>l.V.id,{onDelete:"cascade"}),organizationId:(0,i.uuid)("organization_id").references(()=>s.Z.id,{onDelete:"cascade"}),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()}),u=(0,d.relations)(o,({one:e})=>({user:e(l.V,{fields:[o.userId],references:[l.V.id]}),organization:e(s.Z,{fields:[o.organizationId],references:[s.Z.id]})}));n()}catch(e){n(e)}})},53142:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>u,c:()=>c});var i=a(58025),d=a(11737),s=a(85633),l=a(41167),r=a(59249),o=e([i,d,s,l,r]);[i,d,s,l,r]=o.then?(await o)():o;let u=(0,i.pgTable)("organizations",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),name:(0,i.text)("name").notNull(),slug:(0,i.text)("slug").notNull().unique(),logo:(0,i.text)("logo"),website:(0,i.text)("website"),billingEmail:(0,i.text)("billing_email"),plan:(0,i.text)("plan").default("free").notNull(),stripeCustomerId:(0,i.text)("stripe_customer_id"),stripeSubscriptionId:(0,i.text)("stripe_subscription_id"),stripeSubscriptionStatus:(0,i.text)("stripe_subscription_status"),stripePriceId:(0,i.text)("stripe_price_id"),subscriptionCurrentPeriodEnd:(0,i.timestamp)("subscription_current_period_end",{mode:"date"}),cancelAtPeriodEnd:(0,i.boolean)("cancel_at_period_end").default(!1),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()}),c=(0,d.relations)(u,({many:e})=>({members:e(s.N),integrations:e(l.G),users:e(r.V,{relationName:"defaultOrganization"})}));n()}catch(e){n(e)}})},53189:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{M:()=>r,R:()=>o});var i=a(58025),d=a(11737),s=a(59249),l=e([i,d,s]);[i,d,s]=l.then?(await l)():l;let r=(0,i.pgTable)("sessions",{id:(0,i.uuid)("id").notNull().defaultRandom(),sessionToken:(0,i.text)("session_token").primaryKey().unique(),userId:(0,i.uuid)("user_id").notNull().references(()=>s.V.id,{onDelete:"cascade"}),expires:(0,i.timestamp)("expires",{mode:"date"}).notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()}),o=(0,d.relations)(r,({one:e})=>({user:e(s.V,{fields:[r.userId],references:[s.V.id]})}));n()}catch(e){n(e)}})},55710:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{V:()=>o,c:()=>u});var i=a(58025),d=a(11737),s=a(53142),l=a(59249),r=e([i,d,s,l]);[i,d,s,l]=r.then?(await r)():r;let o=(0,i.pgTable)("embeddings",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),content:(0,i.text)("content").notNull(),embedding:(0,i.text)("embedding").notNull(),metadata:(0,i.json)("metadata"),userId:(0,i.uuid)("user_id").notNull().references(()=>l.V.id,{onDelete:"cascade"}),organizationId:(0,i.uuid)("organization_id").references(()=>s.Z.id,{onDelete:"cascade"}),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull()}),u=(0,d.relations)(o,({one:e})=>({user:e(l.V,{fields:[o.userId],references:[l.V.id]}),organization:e(s.Z,{fields:[o.organizationId],references:[s.Z.id]})}));n()}catch(e){n(e)}})},56050:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{N:()=>u,y:()=>c});var i=a(58025),d=a(11737),s=a(5772),l=a(53142),r=a(59249),o=e([i,d,s,l,r]);[i,d,s,l,r]=o.then?(await o)():o;let u=(0,i.pgTable)("conversations",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),userId:(0,i.uuid)("user_id").notNull().references(()=>r.V.id,{onDelete:"cascade"}),organizationId:(0,i.uuid)("organization_id").references(()=>l.Z.id,{onDelete:"cascade"}),title:(0,i.text)("title").notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull(),lastMessageAt:(0,i.timestamp)("last_message_at",{mode:"date"}).defaultNow().notNull()}),c=(0,d.relations)(u,({one:e,many:t})=>({user:e(r.V,{fields:[u.userId],references:[r.V.id]}),organization:e(l.Z,{fields:[u.organizationId],references:[l.Z.id]}),messages:t(s.D)}));n()}catch(e){n(e)}})},59249:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{V:()=>p,m:()=>g});var i=a(58025),d=a(11737),s=a(88900),l=a(79544),r=a(41167),o=a(85633),u=a(53142),c=a(53189),m=e([i,d,s,l,r,o,u,c]);[i,d,s,l,r,o,u,c]=m.then?(await m)():m;let p=(0,i.pgTable)("users",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),name:(0,i.text)("name"),email:(0,i.text)("email").notNull().unique(),emailVerified:(0,i.timestamp)("email_verified",{mode:"date"}),image:(0,i.text)("image"),password:(0,i.text)("password"),role:(0,l.a6)("role").default("user").notNull(),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull(),defaultOrganizationId:(0,i.uuid)("default_organization_id").references(()=>u.Z.id)}),g=(0,d.relations)(p,({many:e,one:t})=>({accounts:e(s.v),sessions:e(c.M),integrations:e(r.G),organizationMemberships:e(o.N),defaultOrganization:t(u.Z,{fields:[p.defaultOrganizationId],references:[u.Z.id],relationName:"defaultOrganization"})}));n()}catch(e){n(e)}})},68937:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Q:()=>o,T:()=>r});var i=a(58025),d=a(11737),s=a(59249),l=e([i,d,s]);[i,d,s]=l.then?(await l)():l;let r=(0,i.pgTable)("api_tokens",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),userId:(0,i.uuid)("user_id").notNull().references(()=>s.V.id,{onDelete:"cascade"}),name:(0,i.text)("name").notNull(),token:(0,i.text)("token").notNull().unique(),expiresAt:(0,i.timestamp)("expires_at",{mode:"date"}),lastUsedAt:(0,i.timestamp)("last_used_at",{mode:"date"}),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()}),o=(0,d.relations)(r,({one:e})=>({user:e(s.V,{fields:[r.userId],references:[s.V.id]})}));n()}catch(e){n(e)}})},77302:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Dp:()=>r,FF:()=>c,XO:()=>l,p1:()=>o,zl:()=>u});var i=a(58025),d=a(29657),s=e([i,d]);[i,d]=s.then?(await s)():s;let l=(0,i.pgTable)("extensions",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),name:(0,i.text)("name").notNull(),description:(0,i.text)("description"),version:(0,i.text)("version").notNull(),type:(0,i.text)("type").notNull(),author:(0,i.jsonb)("author"),entryPoints:(0,i.jsonb)("entry_points"),permissions:(0,i.jsonb)("permissions"),settings:(0,i.jsonb)("settings"),hooks:(0,i.jsonb)("hooks"),isActive:(0,i.boolean)("is_active").default(!0).notNull(),isSystem:(0,i.boolean)("is_system").default(!1).notNull(),installationSource:(0,i.text)("installation_source").default("custom").notNull(),organizationId:(0,i.uuid)("organization_id").references(()=>d.organizations.id,{onDelete:"cascade"}),userId:(0,i.uuid)("user_id").references(()=>d.users.id,{onDelete:"cascade"}),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull(),lastUsedAt:(0,i.timestamp)("last_used_at",{mode:"date"})}),r=(0,i.pgTable)("extension_marketplace",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),name:(0,i.text)("name").notNull(),description:(0,i.text)("description"),version:(0,i.text)("version").notNull(),type:(0,i.text)("type").notNull(),author:(0,i.jsonb)("author"),entryPoints:(0,i.jsonb)("entry_points"),permissions:(0,i.jsonb)("permissions"),settings:(0,i.jsonb)("settings"),hooks:(0,i.jsonb)("hooks"),isVerified:(0,i.boolean)("is_verified").default(!1).notNull(),isPublished:(0,i.boolean)("is_published").default(!1).notNull(),downloadCount:(0,i.text)("download_count").default("0").notNull(),rating:(0,i.text)("rating").default("0").notNull(),packageUrl:(0,i.text)("package_url").notNull(),iconUrl:(0,i.text)("icon_url"),screenshotUrls:(0,i.jsonb)("screenshot_urls"),websiteUrl:(0,i.text)("website_url"),supportUrl:(0,i.text)("support_url"),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull(),publishedAt:(0,i.timestamp)("published_at",{mode:"date"})}),o=(0,i.pgTable)("extension_storage",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),extensionId:(0,i.uuid)("extension_id").references(()=>l.id,{onDelete:"cascade"}).notNull(),key:(0,i.text)("key").notNull(),value:(0,i.jsonb)("value"),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()}),u=(0,i.pgTable)("extension_logs",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),extensionId:(0,i.uuid)("extension_id").references(()=>l.id,{onDelete:"cascade"}).notNull(),level:(0,i.text)("level").notNull(),message:(0,i.text)("message").notNull(),details:(0,i.jsonb)("details"),timestamp:(0,i.timestamp)("timestamp",{mode:"date"}).defaultNow().notNull()}),c=(0,i.pgTable)("extension_reviews",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),extensionMarketplaceId:(0,i.uuid)("extension_marketplace_id").references(()=>r.id,{onDelete:"cascade"}).notNull(),userId:(0,i.uuid)("user_id").references(()=>d.users.id,{onDelete:"cascade"}).notNull(),rating:(0,i.text)("rating").notNull(),title:(0,i.text)("title"),content:(0,i.text)("content"),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()});n()}catch(e){n(e)}})},78328:(e,t,a)=>{var n=a(6626);let i=process.env.STRIPE_SECRET_KEY;new n.A(i||"",{apiVersion:"2025-02-24.acacia",appInfo:{name:"Nuco-App",version:"0.1.0"}})},79544:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{a6:()=>s,tn:()=>l,wN:()=>r});var i=a(58025),d=e([i]);i=(d.then?(await d)():d)[0];let s=(0,i.pgEnum)("role",["user","admin"]),l=(0,i.pgEnum)("organization_role",["member","admin","owner"]),r=(0,i.pgEnum)("integration_type",["salesforce","hubspot","google","slack"]);n()}catch(e){n(e)}})},79948:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{$E:()=>o,KY:()=>r,UV:()=>u});var i=a(58025),d=a(59249),s=a(18577),l=e([i,d,s]);[i,d,s]=l.then?(await l)():l;let r=(0,i.pgTable)("user_preferences",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),userId:(0,i.uuid)("user_id").notNull().references(()=>d.V.id,{onDelete:"cascade"}),theme:(0,i.varchar)("theme",{length:20}).default("system").notNull(),timezone:(0,i.varchar)("timezone",{length:50}).default("UTC").notNull(),locale:(0,i.varchar)("locale",{length:10}).default("en-US").notNull(),notifications:(0,i.jsonb)("notifications").notNull().$type().default({email:!0,inApp:!0,marketingEmails:!1,slackMessages:!0}),dashboardLayout:(0,i.jsonb)("dashboard_layout").$type(),customization:(0,i.jsonb)("customization").$type(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()},e=>({userIdIndex:(0,i.index)("user_preferences_user_id_idx").on(e.userId)})),o=(0,s.aJ)(r),u=(0,s.r)(r);n()}catch(e){n(e)}})},85633:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{N:()=>u,q:()=>c});var i=a(58025),d=a(11737),s=a(79544),l=a(53142),r=a(59249),o=e([i,d,s,l,r]);[i,d,s,l,r]=o.then?(await o)():o;let u=(0,i.pgTable)("organization_members",{id:(0,i.uuid)("id").defaultRandom().notNull().unique(),organizationId:(0,i.uuid)("organization_id").notNull().references(()=>l.Z.id,{onDelete:"cascade"}),userId:(0,i.uuid)("user_id").notNull().references(()=>r.V.id,{onDelete:"cascade"}),role:(0,s.tn)("role").default("member").notNull(),invitedEmail:(0,i.text)("invited_email"),inviteAccepted:(0,i.boolean)("invite_accepted").default(!1),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()},e=>({uniqMembership:(0,i.primaryKey)({columns:[e.organizationId,e.userId]})})),c=(0,d.relations)(u,({one:e})=>({organization:e(l.Z,{fields:[u.organizationId],references:[l.Z.id]}),user:e(r.V,{fields:[u.userId],references:[r.V.id]})}));n()}catch(e){n(e)}})},88474:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{ej:()=>r}),a(78328);var i=a(21236),d=a(29657),s=a(11737),l=e([i,d,s]);function r(e,t){return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:0}).format(e/100)}[i,d,s]=l.then?(await l)():l,n()}catch(e){n(e)}})},88900:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{g:()=>o,v:()=>r});var i=a(58025),d=a(11737),s=a(59249),l=e([i,d,s]);[i,d,s]=l.then?(await l)():l;let r=(0,i.pgTable)("accounts",{id:(0,i.uuid)("id").defaultRandom().notNull().unique(),userId:(0,i.uuid)("user_id").notNull().references(()=>s.V.id,{onDelete:"cascade"}),type:(0,i.text)("type").$type().notNull(),provider:(0,i.text)("provider").notNull(),providerAccountId:(0,i.text)("provider_account_id").notNull(),refresh_token:(0,i.text)("refresh_token"),access_token:(0,i.text)("access_token"),expires_at:(0,i.integer)("expires_at"),token_type:(0,i.text)("token_type"),scope:(0,i.text)("scope"),id_token:(0,i.text)("id_token"),session_state:(0,i.text)("session_state"),createdAt:(0,i.timestamp)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{mode:"date"}).defaultNow().notNull()},e=>({compoundKey:(0,i.primaryKey)({columns:[e.provider,e.providerAccountId]})})),o=(0,d.relations)(r,({one:e})=>({user:e(s.V,{fields:[r.userId],references:[s.V.id]})}));n()}catch(e){n(e)}})},93012:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{DQ:()=>o,KA:()=>r,oZ:()=>u});var i=a(58025),d=a(41167),s=a(18577),l=e([i,d,s]);[i,d,s]=l.then?(await l)():l;let r=(0,i.pgTable)("integration_settings",{id:(0,i.uuid)("id").primaryKey().defaultRandom(),integrationId:(0,i.uuid)("integration_id").notNull().references(()=>d.G.id,{onDelete:"cascade"}),syncFrequency:(0,i.varchar)("sync_frequency",{length:20}).default("hourly").notNull(),syncSettings:(0,i.jsonb)("sync_settings").$type(),webhookSettings:(0,i.jsonb)("webhook_settings").$type(),apiSettings:(0,i.jsonb)("api_settings").$type(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()},e=>({integrationIdIndex:(0,i.index)("integration_settings_integration_id_idx").on(e.integrationId)})),o=(0,s.aJ)(r),u=(0,s.r)(r);n()}catch(e){n(e)}})},94720:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{P:()=>l});var i=a(58025),d=a(59249),s=e([i,d]);[i,d]=s.then?(await s)():s;let l=(0,i.pgTable)("authenticator",{credentialID:(0,i.text)("credentialID").notNull().unique(),userId:(0,i.uuid)("userId").notNull().references(()=>d.V.id,{onDelete:"cascade"}),providerAccountId:(0,i.text)("providerAccountId").notNull(),credentialPublicKey:(0,i.text)("credentialPublicKey").notNull(),counter:(0,i.integer)("counter").notNull(),credentialDeviceType:(0,i.text)("credentialDeviceType").notNull(),credentialBackedUp:(0,i.boolean)("credentialBackedUp").notNull(),transports:(0,i.text)("transports")},e=>[{compositePK:(0,i.primaryKey)({columns:[e.userId,e.credentialID]})}]);n()}catch(e){n(e)}})},94917:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{f:()=>y});var i=a(60687),d=a(43210),s=a(16189),l=a(20140),r=a(29523),o=a(44493),u=a(96834),c=a(85726),m=a(96586),p=a(88474),g=a(30960),N=a(29494),f=a(54050),_=e([m,p,g]);function y({organizationId:e}){let t=(0,m.n6)(),a=(0,s.useRouter)(),{toast:n}=(0,l.dj)(),[_,y]=(0,d.useState)(!1),{data:x,isLoading:h}=(0,N.I)(t.organization.getSubscriptionStatus.queryOptions({id:e})),{data:v,isLoading:b}=(0,N.I)(t.organization.getAvailablePlans.queryOptions()),w=(0,f.n)(t.organization.createCheckoutSession.mutationOptions({onSuccess:e=>{e.url&&a.push(e.url)},onError:e=>{n({title:"Error",description:e.message||"Failed to create checkout session",variant:"destructive"}),y(!1)}})),I=(0,f.n)(t.organization.createCustomerPortalSession.mutationOptions({onSuccess:e=>{e.url&&a.push(e.url)},onError:e=>{n({title:"Error",description:e.message||"Failed to create customer portal session",variant:"destructive"}),y(!1)}})),k=async t=>{y(!0),w.mutate({organizationId:e,priceId:t})},j=async()=>{y(!0),I.mutate({organizationId:e})},A=()=>{if(!x?.status)return null;let e={active:{label:"Active",variant:"default"},trialing:{label:"Trial",variant:"secondary"},canceled:{label:"Canceled",variant:"destructive"},incomplete:{label:"Incomplete",variant:"outline"},incomplete_expired:{label:"Expired",variant:"destructive"},past_due:{label:"Past Due",variant:"destructive"},unpaid:{label:"Unpaid",variant:"destructive"}}[x.status]||{label:x.status,variant:"outline"};return(0,i.jsx)(u.E,{variant:e.variant,children:e.label})};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)(o.Card,{children:[(0,i.jsxs)(o.CardHeader,{children:[(0,i.jsx)(o.CardTitle,{children:"Subscription"}),(0,i.jsx)(o.CardDescription,{children:"Manage your subscription and billing information"})]}),(0,i.jsx)(o.CardContent,{children:(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-sm font-medium",children:"Current Plan"}),(0,i.jsx)("div",{className:"mt-1",children:(()=>{if(h)return(0,i.jsx)(c.E,{className:"h-4 w-24"});let e=x?.plan||"free",t=e.charAt(0).toUpperCase()+e.slice(1);return(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{children:t}),A()]})})()}),(()=>{if(h||!x?.currentPeriodEnd)return null;let e=new Date(x.currentPeriodEnd);return(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:x.cancelAtPeriodEnd?`Cancels on ${e.toLocaleDateString()}`:`Renews on ${e.toLocaleDateString()}`})})()]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-sm font-medium",children:"Billing"}),(0,i.jsx)("div",{className:"mt-1",children:(0,g.gD)(x?.status)?(0,i.jsx)(r.$,{variant:"outline",onClick:j,disabled:_,children:"Manage Billing"}):(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:"No active subscription"})})]})]})})})]}),(0,i.jsxs)(o.Card,{children:[(0,i.jsxs)(o.CardHeader,{children:[(0,i.jsx)(o.CardTitle,{children:"Available Plans"}),(0,i.jsx)(o.CardDescription,{children:"Choose a plan that works for your team"})]}),(0,i.jsx)(o.CardContent,{children:b?(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsx)(c.E,{className:"h-48 w-full"})}):(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,i.jsxs)(o.Card,{className:"flex flex-col",children:[(0,i.jsxs)(o.CardHeader,{children:[(0,i.jsx)(o.CardTitle,{children:"Free"}),(0,i.jsx)(o.CardDescription,{children:"For small teams getting started"})]}),(0,i.jsxs)(o.CardContent,{className:"flex-1",children:[(0,i.jsx)("div",{className:"text-3xl font-bold",children:"$0"}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Forever free"}),(0,i.jsxs)("ul",{className:"mt-4 space-y-2 text-sm",children:[(0,i.jsx)("li",{children:"Up to 3 team members"}),(0,i.jsx)("li",{children:"1 integration"}),(0,i.jsx)("li",{children:"100 requests per month"}),(0,i.jsx)("li",{children:"Basic features"})]})]}),(0,i.jsx)(o.CardFooter,{children:(0,i.jsx)(r.$,{variant:"outline",className:"w-full",disabled:!(0,g.py)(x?.plan),onClick:j,children:(0,g.py)(x?.plan)?"Downgrade":"Current Plan"})})]}),v?.map(e=>i.jsxs(o.Card,{className:"flex flex-col",children:[i.jsxs(o.CardHeader,{children:[i.jsx(o.CardTitle,{children:e.name}),i.jsx(o.CardDescription,{children:e.description||"For growing teams"})]}),i.jsxs(o.CardContent,{className:"flex-1",children:[i.jsx("div",{className:"text-3xl font-bold",children:p.ej(e.amount,e.currency)}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["per ","month"===e.interval?"month":"year"]}),i.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:e.features?.map((e,t)=>i.jsx("li",{children:e},t))})]}),i.jsx(o.CardFooter,{children:i.jsx(r.$,{className:"w-full",disabled:_||x?.plan===e.name.toLowerCase()&&g.gD(x?.status),onClick:()=>k(e.id),children:x?.plan===e.name.toLowerCase()&&g.gD(x?.status)?"Current Plan":"Subscribe"})})]},e.id))]})})]})]})}[m,p,g]=_.then?(await _)():_,n()}catch(e){n(e)}})}};