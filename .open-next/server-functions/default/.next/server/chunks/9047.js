exports.id=9047,exports.ids=[9047],exports.modules={10974:(e,t,r)=>{"use strict";r.d(t,{$_:()=>u,Yv:()=>i,cn:()=>a,jP:()=>s});var n=r(75986),o=r(8974);function a(...e){return(0,o.QP)((0,n.$)(e))}async function s(e,t){for await(let r of e.textStream)t(r)}function i(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")}function u(){return process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:`http://localhost:${process.env.PORT||3e3}`}},14590:(e,t,r)=>{"use strict";r.d(t,{Sk:()=>i,UT:()=>s,dh:()=>o,om:()=>a});var n=r(70762);let o=n.z.enum(["openai","anthropic","google","custom"]);n.z.object({id:n.z.string(),name:n.z.string(),provider:o,contextWindow:n.z.number(),maxOutputTokens:n.z.number().optional(),temperature:n.z.number().min(0).max(2).default(.7),topP:n.z.number().min(0).max(1).default(1),frequencyPenalty:n.z.number().min(0).max(2).default(0),presencePenalty:n.z.number().min(0).max(2).default(0),costPer1kInput:n.z.number().default(0),costPer1kOutput:n.z.number().default(0),inputTokenCounter:n.z.function().args(n.z.string()).returns(n.z.promise(n.z.number())).optional(),outputTokenCounter:n.z.function().args(n.z.string()).returns(n.z.promise(n.z.number())).optional()});let a=[{id:"gpt-4o",name:"GPT-4o",provider:"openai",contextWindow:128e3,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.005,costPer1kOutput:.015},{id:"gpt-4-turbo",name:"GPT-4 Turbo",provider:"openai",contextWindow:128e3,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.01,costPer1kOutput:.03},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",provider:"openai",contextWindow:16385,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:5e-4,costPer1kOutput:.0015},{id:"claude-3-opus",name:"Claude 3 Opus",provider:"anthropic",contextWindow:2e5,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.015,costPer1kOutput:.075},{id:"claude-3-sonnet",name:"Claude 3 Sonnet",provider:"anthropic",contextWindow:2e5,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.003,costPer1kOutput:.015},{id:"claude-3-haiku",name:"Claude 3 Haiku",provider:"anthropic",contextWindow:2e5,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:25e-5,costPer1kOutput:.00125},{id:"gemini-pro",name:"Gemini Pro",provider:"google",contextWindow:32768,maxOutputTokens:2048,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:25e-5,costPer1kOutput:5e-4},{id:"gemini-ultra",name:"Gemini Ultra",provider:"google",contextWindow:32768,maxOutputTokens:2048,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.00125,costPer1kOutput:.00375}];function s(e){return a.find(t=>t.id===e)}let i="gpt-3.5-turbo"},67319:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{jo:()=>p});var o=r(70762),a=r(58178),s=r(98072),i=r(55511),u=r.n(i),c=e([a]);a=(c.then?(await c)():c)[0];let l=o.z.object({clientId:o.z.string(),clientSecret:o.z.string(),signingSecret:o.z.string().optional(),teamId:o.z.string().optional(),teamName:o.z.string().optional(),botUserId:o.z.string().optional(),webhookUrl:o.z.string().optional(),scopes:o.z.array(o.z.string()).default(["chat:write","channels:read","users:read","team:read","chat:write.public","incoming-webhook"]),accessToken:o.z.string().optional(),refreshToken:o.z.string().optional(),expiresAt:o.z.number().optional()}),m=o.z.object({id:o.z.string(),name:o.z.string(),is_channel:o.z.boolean(),is_group:o.z.boolean(),is_im:o.z.boolean(),is_private:o.z.boolean(),is_mpim:o.z.boolean(),created:o.z.number(),is_archived:o.z.boolean(),is_general:o.z.boolean(),unlinked:o.z.number(),name_normalized:o.z.string(),is_shared:o.z.boolean(),is_org_shared:o.z.boolean(),is_pending_ext_shared:o.z.boolean(),pending_shared:o.z.array(o.z.unknown()),context_team_id:o.z.string(),updated:o.z.number().optional(),parent_conversation:o.z.string().optional(),creator:o.z.string().optional(),is_ext_shared:o.z.boolean().optional(),shared_team_ids:o.z.array(o.z.string()).optional(),pending_connected_team_ids:o.z.array(o.z.string()).optional(),is_member:o.z.boolean().optional(),topic:o.z.object({value:o.z.string(),creator:o.z.string(),last_set:o.z.number()}).optional(),purpose:o.z.object({value:o.z.string(),creator:o.z.string(),last_set:o.z.number()}).optional(),previous_names:o.z.array(o.z.string()).optional(),num_members:o.z.number().optional()}),d=o.z.object({id:o.z.string(),team_id:o.z.string(),name:o.z.string(),deleted:o.z.boolean(),color:o.z.string(),real_name:o.z.string(),tz:o.z.string(),tz_label:o.z.string(),tz_offset:o.z.number(),profile:o.z.object({title:o.z.string().optional(),phone:o.z.string().optional(),skype:o.z.string().optional(),real_name:o.z.string(),real_name_normalized:o.z.string(),display_name:o.z.string(),display_name_normalized:o.z.string(),status_text:o.z.string(),status_emoji:o.z.string(),status_expiration:o.z.number().optional(),avatar_hash:o.z.string(),email:o.z.string().optional(),image_original:o.z.string().optional(),image_24:o.z.string(),image_32:o.z.string(),image_48:o.z.string(),image_72:o.z.string(),image_192:o.z.string(),image_512:o.z.string(),team:o.z.string()}),is_admin:o.z.boolean(),is_owner:o.z.boolean(),is_primary_owner:o.z.boolean(),is_restricted:o.z.boolean(),is_ultra_restricted:o.z.boolean(),is_bot:o.z.boolean(),is_app_user:o.z.boolean(),updated:o.z.number(),has_2fa:o.z.boolean().optional()});o.z.object({channel:o.z.string(),text:o.z.string(),blocks:o.z.array(o.z.record(o.z.unknown())).optional(),thread_ts:o.z.string().optional(),reply_broadcast:o.z.boolean().optional()});class g{constructor(e){this.config=l.parse(e)}getIntegrationId(){return"slack"}getTeamId(){return this.config.teamId||""}getBotUserId(){return this.config.botUserId||""}async getAuthStatus(){let e=await (0,a.j2)();return e?.user&&(0,s.F0)(e,"slack")?{isAuthenticated:!0,accountId:e.user.id}:{isAuthenticated:!1}}async disconnect(){try{return await (0,a.CI)({redirect:!1}),!0}catch(e){return!1}}async authenticate(){try{return await (0,a.Jv)("slack",{redirect:!0}),!0}catch(e){return!1}}async makeRequest(e,t="GET",r){let n=await (0,a.j2)();if(!(0,s.F0)(n,"slack"))throw new s.v3("Not authenticated with Slack");let o=n.token.accessToken,i=`https://slack.com/api/${e}`,u={method:t,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json; charset=utf-8"}};if(r){if("GET"===t){let e=new URLSearchParams;Object.entries(r).forEach(([t,r])=>{e.append(t,String(r))});let t=e.toString();if(t){let e=i.includes("?")?"&":"?";i=i+e+t}}else u.body=JSON.stringify(r)}let c=await fetch(i,u);if(!c.ok)throw Error(`Slack API error: ${c.statusText}`);let p=await c.json();if(!p.ok)throw Error(`Slack API error: ${p.error||"Unknown error"}`);return p}async getChannels(){return(await this.makeRequest("conversations.list","GET",{types:"public_channel,private_channel",exclude_archived:!0,limit:1e3})).channels.map(e=>m.parse(e))}async getUsers(){return(await this.makeRequest("users.list","GET")).members.map(e=>d.parse(e))}async sendMessage(e){return await this.makeRequest("chat.postMessage","POST",e)}async addReaction(e,t,r){return await this.makeRequest("reactions.add","POST",{channel:e,timestamp:t,name:r})}async removeReaction(e,t,r){return await this.makeRequest("reactions.remove","POST",{channel:e,timestamp:t,name:r})}async getReactions(e,t){return await this.makeRequest("reactions.get","GET",{channel:e,timestamp:t})}async getThreadReplies(e,t,r=100){return await this.makeRequest("conversations.replies","GET",{channel:e,ts:t,limit:r})}async getUserPresence(e){return await this.makeRequest("users.getPresence","GET",{user:e})}async setUserPresence(e){return await this.makeRequest("users.setPresence","POST",{presence:e})}verifySignature(e,t,r){if(!this.config.signingSecret)return!1;let n=u().createHmac("sha256",this.config.signingSecret),[o,a]=e.split("="),s=Math.floor(Date.now()/1e3);if(Math.abs(s-parseInt(t,10))>300)return!1;let i=`${o}:${t}:${r}`,c=n.update(i).digest("hex");return u().timingSafeEqual(Buffer.from(a),Buffer.from(c))}async getAllUsersPresence(){try{let e=await this.getUsers(),t=await Promise.all(e.map(async e=>{let t=await this.getUserPresence(e.id);return{user_id:e.id,user_name:e.name,...t}}));return{ok:!0,users:t}}catch(e){return{ok:!1,error:"Failed to get users presence"}}}}function p(e){return new g(e)}n()}catch(e){n(e)}})},78335:()=>{},96487:()=>{},98072:(e,t,r)=>{"use strict";r.d(t,{F0:()=>a,v3:()=>o});class n extends Error{constructor(e){super(e),this.name="IntegrationError"}}class o extends n{constructor(e="Not authenticated with the integration"){super(e),this.name="AuthenticationError"}}function a(e,t){return!!e?.token?.accessToken&&e.token?.provider===t}},99040:(e,t,r)=>{"use strict";r.d(t,{sF:()=>c,ih:()=>l,c5:()=>p});var n=r(14590),o=r(81248),a=r(12709),s=function(e){return e.RATE_LIMIT="rate_limit",e.TOKEN_LIMIT="token_limit",e.INVALID_REQUEST="invalid_request",e.AUTHENTICATION="authentication",e.PERMISSIONS="permissions",e.SERVER_ERROR="server_error",e.CONNECTION="connection",e.TIMEOUT="timeout",e.UNKNOWN="unknown",e}({});class i extends Error{constructor(e,t="unknown",r){super(e),this.name="OpenAIError",this.type=t,this.status=r}}async function u(e,t,r){if("openai"!==t.provider)throw Error(`Model ${t.id} is not an OpenAI model`);try{return(0,a.gM)({model:(0,o.N)(t.id),messages:e,temperature:t.temperature})}catch(e){throw function(e){if("object"==typeof e&&null!==e){if(429===e.status||e.error?.type==="rate_limit_exceeded"){let t=e.headers?.["retry-after"]?parseInt(e.headers["retry-after"],10):void 0,r=new i("Rate limit exceeded. Please try again later.","rate_limit",429);return r.retryAfter=t,r}if(400===e.status&&e.error?.code==="context_length_exceeded")return new i("The input is too long for the model to process. Please reduce the length of your prompt.","token_limit",400);if(401===e.status)return new i("Authentication error: Invalid API key or token.","authentication",401);if(403===e.status)return new i("You do not have permission to access this resource or model.","permissions",403);if(e.status>=500)return new i("OpenAI server error. Please try again later.","server_error",e.status);if(400===e.status)return new i(e.error?.message||"Invalid request to OpenAI API.","invalid_request",400);if(e.message)return new i(String(e.message))}return e instanceof Error?e.message.includes("timeout")||e.message.includes("ETIMEDOUT")?new i("Request to OpenAI API timed out. Please try again later.","timeout"):e.message.includes("ECONNREFUSED")||e.message.includes("ENOTFOUND")?new i("Could not connect to OpenAI API. Please check your internet connection.","connection"):new i(e.message):new i("An unknown error occurred with the OpenAI API.","unknown")}(e)}}class c extends Error{constructor(e,t,r="unknown",n){super(e),this.name="AIServiceError",this.provider=t,this.status=n,this.type=r}}async function p(e,t={},r=0){let o=t.modelId||n.Sk,a=(0,n.UT)(o);if(!a)throw new c(`Model ${o} not found`,"custom","invalid_model");let l={...a,temperature:t.temperature??a.temperature,topP:t.topP??a.topP,frequencyPenalty:t.frequencyPenalty??a.frequencyPenalty,presencePenalty:t.presencePenalty??a.presencePenalty,maxOutputTokens:t.maxTokens??a.maxOutputTokens},m=function(e,t){let r=[];return t&&r.push({role:"system",content:t}),r.push(...e),r}(e,t.systemPrompt);try{switch(a.provider){case"openai":return await u(m,l,t.functions);case"anthropic":throw new c("Anthropic provider not implemented yet","anthropic","not_implemented");case"google":throw new c("Google provider not implemented yet","google","not_implemented");case"custom":throw new c("Custom provider not implemented yet","custom","not_implemented");default:throw new c(`Unsupported provider: ${a.provider}`,"custom","invalid_provider")}}catch(n){if(n instanceof i){let o=new c(n.message,"openai",n.type,n.status);if(o.retryAfter=n.retryAfter,n.type===s.RATE_LIMIT&&r<3){let o=n.retryAfter?1e3*n.retryAfter:Math.min(1e3*Math.pow(2,r)*(.3*Math.random()+.85),6e4);return await new Promise(e=>setTimeout(e,o)),p(e,t,r+1)}throw o}if(n instanceof Error)throw new c(n.message,a.provider,"unknown");throw new c("Unknown error",a.provider,"unknown")}}async function l(e,t="openai"){switch(t){case"openai":case"anthropic":case"google":case"custom":return Math.ceil(e.length/4);default:throw Error(`Unsupported provider: ${t}`)}}}};