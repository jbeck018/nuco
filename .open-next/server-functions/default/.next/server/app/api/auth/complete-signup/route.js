(()=>{var e={};e.id=8563,e.ids=[8563],e.modules={3019:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{POST:()=>c});var s=r(32190),o=r(70762),u=r(58178),i=r(78499),a=e([u,i]);[u,i]=a.then?(await a)():a;let l=o.z.object({userId:o.z.string(),organizationName:o.z.string().min(2)});async function c(e){try{let t=await (0,u.j2)();if(!t?.user?.id)return s.NextResponse.json({message:"Unauthorized"},{status:401});let r=await e.json(),n=l.safeParse(r);if(!n.success)return s.NextResponse.json({message:"Invalid request data",errors:n.error.errors},{status:400});let{userId:o,organizationName:a}=n.data;if(t.user.id!==o)return s.NextResponse.json({message:"Unauthorized: You can only update your own account"},{status:403});let c=await (0,i.wV)(o);if(0!==c.length)return s.NextResponse.json({message:"User already has an organization",organizationId:c[0].id});{let e=await (0,i.EC)({name:a,userId:o,billingEmail:t.user.email||""});if(!e)throw Error("Failed to create organization");return s.NextResponse.json({message:"Organization created successfully",organizationId:e.id})}}catch(e){return s.NextResponse.json({message:e instanceof Error?e.message:"An unexpected error occurred"},{status:500})}}n()}catch(e){n(e)}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},8704:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HTTPAccessErrorStatus:function(){return r},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return s},getAccessFallbackErrorTypeByStatus:function(){return i},getAccessFallbackHTTPStatus:function(){return u},isHTTPAccessFallbackError:function(){return o}});let r={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},n=new Set(Object.values(r)),s="NEXT_HTTP_ERROR_FALLBACK";function o(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===s&&n.has(Number(r))}function u(e){return Number(e.digest.split(";")[1])}function i(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10788:e=>{"use strict";e.exports=import("drizzle-orm/mysql-core")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10974:(e,t,r)=>{"use strict";r.d(t,{$_:()=>a,Yv:()=>i,cn:()=>o,jP:()=>u});var n=r(75986),s=r(8974);function o(...e){return(0,s.QP)((0,n.$)(e))}async function u(e,t){for await(let r of e.textStream)t(r)}function i(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")}function a(){return process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:`http://localhost:${process.env.PORT||3e3}`}},11737:e=>{"use strict";e.exports=import("drizzle-orm")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return o}});let n=r(8704),s=r(49026);function o(e){return(0,s.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{REDIRECT_ERROR_CODE:function(){return s},RedirectType:function(){return o},isRedirectError:function(){return u}});let n=r(52836),s="NEXT_REDIRECT";var o=function(e){return e.push="push",e.replace="replace",e}({});function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,o]=t,u=t.slice(2,-2).join(";"),i=Number(t.at(-2));return r===s&&("replace"===o||"push"===o)&&"string"==typeof u&&!isNaN(i)&&i in n.RedirectStatusCode}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},51846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return s}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},52637:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let r=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},52836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}});var r=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},55511:e=>{"use strict";e.exports=require("crypto")},56473:e=>{"use strict";e.exports=import("drizzle-orm/neon-http")},57238:e=>{"use strict";e.exports=import("drizzle-orm/sqlite-core")},57975:e=>{"use strict";e.exports=require("node:util")},58025:e=>{"use strict";e.exports=import("drizzle-orm/pg-core")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63434:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{patchFetch:()=>c,routeModule:()=>l,serverHooks:()=>f,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>d});var s=r(96559),o=r(48088),u=r(37719),i=r(3019),a=e([i]);i=(a.then?(await a)():a)[0];let l=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/auth/complete-signup/route",pathname:"/api/auth/complete-signup",filename:"route",bundlePath:"app/api/auth/complete-signup/route"},resolvedPagePath:"/Users/jacob/projects/nuco/src/app/api/auth/complete-signup/route.ts",nextConfigOutput:"standalone",userland:i}),{workAsyncStorage:p,workUnitAsyncStorage:d,serverHooks:f}=l;function c(){return(0,u.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:d})}n()}catch(e){n(e)}})},76926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return a}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(61120));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}let o={current:null},u="function"==typeof n.cache?n.cache:e=>e,i=console.warn;function a(e){return function(...t){i(e(...t))}}u(e=>{try{i(o.current)}finally{o.current=null}})},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4447,4017,2190,1771,4999,1712,1682,8178],()=>r(63434));module.exports=n})();