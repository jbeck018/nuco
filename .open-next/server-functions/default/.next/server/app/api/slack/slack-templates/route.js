(()=>{var e={};e.id=2589,e.ids=[2589],e.modules={3195:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{GET:()=>p,POST:()=>n});var a=r(32190),o=r(71682),i=e([o]);async function n(e){try{let{integrationId:t}=await e.json(),r=t?await o.db.query.integrations.findFirst({where:(e,{eq:r})=>r(e.id,t)}):await o.db.query.integrations.findFirst({where:(e,{eq:t,and:r})=>r(t(e.type,"slack"),t(e.isActive,!0))});if(!r)return a.NextResponse.json({error:"Slack integration not found"},{status:404});let s=await o.db.query.promptTemplates.findMany({where:(e,{eq:t,or:s,and:a})=>s(t(e.userId,r.userId),a(t(e.isPublic,!0),r.organizationId?t(e.organizationId,r.organizationId):t(e.isPublic,!0))),orderBy:(e,{desc:t})=>[t(e.updatedAt)],limit:10});if(0===s.length)return a.NextResponse.json({response_type:"ephemeral",text:"You don't have any prompt templates yet. Create one at http://localhost:3000/chat-templates/new"});let i=[{type:"section",text:{type:"mrkdwn",text:"*Your Prompt Templates*"}},{type:"divider"}];return s.forEach(e=>{i.push({type:"section",text:{type:"mrkdwn",text:`*${e.name}*
${e.description||"No description"}`},accessory:{type:"button",text:{type:"plain_text",text:"Use Template",emoji:!0},value:e.id,action_id:"use_template"}},{type:"divider"})}),i.push({type:"section",text:{type:"mrkdwn",text:"<http://localhost:3000/chat-templates|View all templates>"}}),a.NextResponse.json({response_type:"ephemeral",blocks:i})}catch(e){return a.NextResponse.json({error:"Internal server error"},{status:500})}}async function p(){return a.NextResponse.json({message:"Use POST to list templates"})}o=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11737:e=>{"use strict";e.exports=import("drizzle-orm")},21820:e=>{"use strict";e.exports=require("os")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},56473:e=>{"use strict";e.exports=import("drizzle-orm/neon-http")},58025:e=>{"use strict";e.exports=import("drizzle-orm/pg-core")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66438:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{patchFetch:()=>u,routeModule:()=>c,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var a=r(96559),o=r(48088),i=r(37719),n=r(3195),p=e([n]);n=(p.then?(await p)():p)[0];let c=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/slack/slack-templates/route",pathname:"/api/slack/slack-templates",filename:"route",bundlePath:"app/api/slack/slack-templates/route"},resolvedPagePath:"/Users/jacob/projects/nuco/src/app/api/slack/slack-templates/route.ts",nextConfigOutput:"standalone",userland:n}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:m}=c;function u(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}s()}catch(e){s(e)}})},78335:()=>{},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,2190,1771,1682],()=>r(66438));module.exports=s})();