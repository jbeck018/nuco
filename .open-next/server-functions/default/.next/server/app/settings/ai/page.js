(()=>{var e={};e.id=2181,e.ids=[2181],e.modules={2733:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{a:()=>p,y:()=>f});var s=r(43210),i=r(96586),a=r(22111),o=r(20140),l=r(29494),d=r(54050),c=r(8693),u=e([i]);i=(u.then?(await u)():u)[0];let m={defaultModel:"gpt-3.5-turbo",maxTokensPerRequest:2e3,promptTemplates:[],contextSettings:{includeUserHistory:!0,includeOrganizationData:!0,contextWindowSize:10}};function p(e){if(!e||"object"!=typeof e||"string"!=typeof e.defaultModel||"number"!=typeof e.maxTokensPerRequest||!Array.isArray(e.promptTemplates))return!1;for(let t of e.promptTemplates)if("object"!=typeof t||null===t||"string"!=typeof t.id||"string"!=typeof t.name||void 0!==t.isDefault&&"boolean"!=typeof t.isDefault)return!1;if(void 0!==e.contextSettings){if("object"!=typeof e.contextSettings||null===e.contextSettings)return!1;let t=e.contextSettings;if("boolean"!=typeof t.includeUserHistory||"boolean"!=typeof t.includeOrganizationData||"number"!=typeof t.contextWindowSize)return!1}return!0}function f(){let e=(0,i.n6)(),{data:t}=(0,a.wV)(),{toast:r}=(0,o.dj)(),[n,u]=(0,s.useState)(null),[p,f]=(0,s.useState)(null),x=(0,c.jE)(),{data:h,isLoading:g}=(0,l.I)(e.metadata.getUserFlexiblePreferences.queryOptions({key:"aiSettings"},{enabled:!!t?.user?.id,staleTime:3e5})),v=(0,d.n)(e.metadata.setUserFlexiblePreferences.mutationOptions({onSuccess:()=>{x.invalidateQueries(e.metadata.getUserFlexiblePreferences.queryFilter({key:"aiSettings"}))},onError:e=>{f(Error(e.message)),r({title:"Error",description:"Failed to update AI preferences",variant:"destructive"})}})),y=(0,s.useCallback)(async e=>{if(!t?.user?.id)throw Error("User not authenticated");let r=n||m;try{return await v.mutateAsync({key:"aiSettings",value:{...r,...e}})}catch{return}},[n,t?.user?.id,v]),b=(0,s.useCallback)(async e=>{await y({defaultModel:e}),r({title:"Preferences Updated",description:"Default AI model has been updated"})},[y,r]),w=(0,s.useCallback)(async e=>{await y({maxTokensPerRequest:e}),r({title:"Preferences Updated",description:"Maximum tokens per request has been updated"})},[y,r]),j=(0,s.useCallback)(async e=>{await y({promptTemplates:e}),r({title:"Preferences Updated",description:"Prompt template preferences have been updated"})},[y,r]),k=(0,s.useCallback)(async e=>{let t=n?.contextSettings||m.contextSettings;if(!t)throw Error("Context settings not properly initialized");let s={includeUserHistory:e.includeUserHistory??t.includeUserHistory,includeOrganizationData:e.includeOrganizationData??t.includeOrganizationData,contextWindowSize:e.contextWindowSize??t.contextWindowSize};await y({contextSettings:s}),r({title:"Preferences Updated",description:"AI context settings have been updated"})},[n,y,r]),C=(0,s.useCallback)(async()=>{await v.mutateAsync({key:"aiSettings",value:m}),r({title:"Preferences Reset",description:"AI preferences have been reset to default values"})},[v,r]);return{preferences:n,isLoading:g,error:p,updateDefaultModel:b,updateMaxTokens:w,updateTemplatePreferences:j,updateContextSettings:k,reset:C}}n()}catch(e){n(e)}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8654:e=>{"use strict";e.exports=import("@trpc/server/unstable-core-do-not-import")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12617:e=>{"use strict";e.exports=import("@trpc/server/rpc")},15883:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>a});var n=r(37413),s=r(85593),i=r(53164);let a={title:"AI Settings - Nuco",description:"Configure your AI preferences for contextual, personalized AI interactions"};function o(){return(0,n.jsxs)("div",{className:"container max-w-5xl py-8",children:[(0,n.jsx)(i.z,{heading:"AI Settings",subheading:"Configure your AI preferences for more relevant and personalized interactions"}),(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(s.AiSettingsForm,{})})]})}},18622:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var n=r(65239),s=r(48088),i=r(88170),a=r.n(i),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["settings",{children:["ai",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,15883)),"/Users/jacob/projects/nuco/src/app/settings/ai/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,50225)),"/Users/jacob/projects/nuco/src/app/settings/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,46127)),"/Users/jacob/projects/nuco/src/app/settings/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/jacob/projects/nuco/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,67393)),"/Users/jacob/projects/nuco/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/jacob/projects/nuco/src/app/settings/ai/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/settings/ai/page",pathname:"/settings/ai",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25356:(e,t,r)=>{"use strict";r.d(t,{A:()=>G});var n=r(60687),s=r(43210),i=r(67969),a=r(70569),o=r(98599),l=r(11273),d=r(65551),c=r(43),u=r(83721),p=r(18853),f=r(14163),m=r(9510),x=["PageUp","PageDown"],h=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],g={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},v="Slider",[y,b,w]=(0,m.N)(v),[j,k]=(0,l.A)(v,[w]),[C,S]=j(v),P=s.forwardRef((e,t)=>{let{name:r,min:o=0,max:l=100,step:c=1,orientation:u="horizontal",disabled:p=!1,minStepsBetweenThumbs:f=0,defaultValue:m=[o],value:g,onValueChange:v=()=>{},onValueCommit:b=()=>{},inverted:w=!1,form:j,...k}=e,S=s.useRef(new Set),P=s.useRef(0),A="horizontal"===u,[E=[],D]=(0,d.i)({prop:g,defaultProp:m,onChange:e=>{let t=[...S.current];t[P.current]?.focus(),v(e)}}),R=s.useRef(E);function I(e,t,{commit:r}={commit:!1}){let n=(String(c).split(".")[1]||"").length,s=function(e,t){let r=Math.pow(10,t);return Math.round(e*r)/r}(Math.round((e-o)/c)*c+o,n),a=(0,i.q)(s,[o,l]);D((e=[])=>{let n=function(e=[],t,r){let n=[...e];return n[r]=t,n.sort((e,t)=>e-t)}(e,a,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,r)=>e[r+1]-t))>=t;return!0}(n,f*c))return e;{P.current=n.indexOf(a);let t=String(n)!==String(e);return t&&r&&b(n),t?n:e}})}return(0,n.jsx)(C,{scope:e.__scopeSlider,name:r,disabled:p,min:o,max:l,valueIndexToChangeRef:P,thumbs:S.current,values:E,orientation:u,form:j,children:(0,n.jsx)(y.Provider,{scope:e.__scopeSlider,children:(0,n.jsx)(y.Slot,{scope:e.__scopeSlider,children:(0,n.jsx)(A?N:T,{"aria-disabled":p,"data-disabled":p?"":void 0,...k,ref:t,onPointerDown:(0,a.m)(k.onPointerDown,()=>{p||(R.current=E)}),min:o,max:l,inverted:w,onSlideStart:p?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let r=e.map(e=>Math.abs(e-t)),n=Math.min(...r);return r.indexOf(n)}(E,e);I(e,t)},onSlideMove:p?void 0:function(e){I(e,P.current)},onSlideEnd:p?void 0:function(){let e=R.current[P.current];E[P.current]!==e&&b(E)},onHomeKeyDown:()=>!p&&I(o,0,{commit:!0}),onEndKeyDown:()=>!p&&I(l,E.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!p){let r=x.includes(e.key)||e.shiftKey&&h.includes(e.key),n=P.current;I(E[n]+c*(r?10:1)*t,n,{commit:!0})}}})})})})});P.displayName=v;var[A,E]=j(v,{startEdge:"left",endEdge:"right",size:"width",direction:1}),N=s.forwardRef((e,t)=>{let{min:r,max:i,dir:a,inverted:l,onSlideStart:d,onSlideMove:u,onSlideEnd:p,onStepKeyDown:f,...m}=e,[x,h]=s.useState(null),v=(0,o.s)(t,e=>h(e)),y=s.useRef(void 0),b=(0,c.jH)(a),w="ltr"===b,j=w&&!l||!w&&l;function k(e){let t=y.current||x.getBoundingClientRect(),n=H([0,t.width],j?[r,i]:[i,r]);return y.current=t,n(e-t.left)}return(0,n.jsx)(A,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:(0,n.jsx)(D,{dir:b,"data-orientation":"horizontal",...m,ref:v,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=k(e.clientX);d?.(t)},onSlideMove:e=>{let t=k(e.clientX);u?.(t)},onSlideEnd:()=>{y.current=void 0,p?.()},onStepKeyDown:e=>{let t=g[j?"from-left":"from-right"].includes(e.key);f?.({event:e,direction:t?-1:1})}})})}),T=s.forwardRef((e,t)=>{let{min:r,max:i,inverted:a,onSlideStart:l,onSlideMove:d,onSlideEnd:c,onStepKeyDown:u,...p}=e,f=s.useRef(null),m=(0,o.s)(t,f),x=s.useRef(void 0),h=!a;function v(e){let t=x.current||f.current.getBoundingClientRect(),n=H([0,t.height],h?[i,r]:[r,i]);return x.current=t,n(e-t.top)}return(0,n.jsx)(A,{scope:e.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:(0,n.jsx)(D,{"data-orientation":"vertical",...p,ref:m,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=v(e.clientY);l?.(t)},onSlideMove:e=>{let t=v(e.clientY);d?.(t)},onSlideEnd:()=>{x.current=void 0,c?.()},onStepKeyDown:e=>{let t=g[h?"from-bottom":"from-top"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),D=s.forwardRef((e,t)=>{let{__scopeSlider:r,onSlideStart:s,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:d,onStepKeyDown:c,...u}=e,p=S(v,r);return(0,n.jsx)(f.sG.span,{...u,ref:t,onKeyDown:(0,a.m)(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):x.concat(h).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:(0,a.m)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),p.thumbs.has(t)?t.focus():s(e)}),onPointerMove:(0,a.m)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:(0,a.m)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),o(e))})})}),R="SliderTrack",I=s.forwardRef((e,t)=>{let{__scopeSlider:r,...s}=e,i=S(R,r);return(0,n.jsx)(f.sG.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:t})});I.displayName=R;var _="SliderRange",z=s.forwardRef((e,t)=>{let{__scopeSlider:r,...i}=e,a=S(_,r),l=E(_,r),d=s.useRef(null),c=(0,o.s)(t,d),u=a.values.length,p=a.values.map(e=>L(e,a.min,a.max)),m=u>1?Math.min(...p):0,x=100-Math.max(...p);return(0,n.jsx)(f.sG.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...i,ref:c,style:{...e.style,[l.startEdge]:m+"%",[l.endEdge]:x+"%"}})});z.displayName=_;var M="SliderThumb",U=s.forwardRef((e,t)=>{let r=b(e.__scopeSlider),[i,a]=s.useState(null),l=(0,o.s)(t,e=>a(e)),d=s.useMemo(()=>i?r().findIndex(e=>e.ref.current===i):-1,[r,i]);return(0,n.jsx)(O,{...e,ref:l,index:d})}),O=s.forwardRef((e,t)=>{let{__scopeSlider:r,index:i,name:l,...d}=e,c=S(M,r),u=E(M,r),[m,x]=s.useState(null),h=(0,o.s)(t,e=>x(e)),g=!m||c.form||!!m.closest("form"),v=(0,p.X)(m),b=c.values[i],w=void 0===b?0:L(b,c.min,c.max),j=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(i,c.values.length),k=v?.[u.size],C=k?function(e,t,r){let n=e/2,s=H([0,50],[0,n]);return(n-s(t)*r)*r}(k,w,u.direction):0;return s.useEffect(()=>{if(m)return c.thumbs.add(m),()=>{c.thumbs.delete(m)}},[m,c.thumbs]),(0,n.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${w}% + ${C}px)`},children:[(0,n.jsx)(y.ItemSlot,{scope:e.__scopeSlider,children:(0,n.jsx)(f.sG.span,{role:"slider","aria-label":e["aria-label"]||j,"aria-valuemin":c.min,"aria-valuenow":b,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...d,ref:h,style:void 0===b?{display:"none"}:e.style,onFocus:(0,a.m)(e.onFocus,()=>{c.valueIndexToChangeRef.current=i})})}),g&&(0,n.jsx)(F,{name:l??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:b},i)]})});U.displayName=M;var F=e=>{let{value:t,...r}=e,i=s.useRef(null),a=(0,u.Z)(t);return s.useEffect(()=>{let e=i.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(a!==t&&r){let n=new Event("input",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[a,t]),(0,n.jsx)("input",{style:{display:"none"},...r,ref:i,defaultValue:t})};function L(e,t,r){return(0,i.q)(100/(r-t)*(e-t),[0,100])}function H(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}var q=r(4780);function G({className:e,defaultValue:t,value:r,min:i=0,max:a=100,...o}){let l=s.useMemo(()=>Array.isArray(r)?r:Array.isArray(t)?t:[i,a],[r,t,i,a]);return(0,n.jsxs)(P,{"data-slot":"slider",defaultValue:t,value:r,min:i,max:a,className:(0,q.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...o,children:[(0,n.jsx)(I,{"data-slot":"slider-track",className:(0,q.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,n.jsx)(z,{"data-slot":"slider-range",className:(0,q.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(e,t)=>(0,n.jsx)(U,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}},27479:(e,t,r)=>{"use strict";r.d(t,{d:()=>k});var n=r(60687),s=r(43210),i=r(70569),a=r(98599),o=r(11273),l=r(65551),d=r(83721),c=r(18853),u=r(14163),p="Switch",[f,m]=(0,o.A)(p),[x,h]=f(p),g=s.forwardRef((e,t)=>{let{__scopeSwitch:r,name:o,checked:d,defaultChecked:c,required:p,disabled:f,value:m="on",onCheckedChange:h,form:g,...v}=e,[y,j]=s.useState(null),k=(0,a.s)(t,e=>j(e)),C=s.useRef(!1),S=!y||g||!!y.closest("form"),[P=!1,A]=(0,l.i)({prop:d,defaultProp:c,onChange:h});return(0,n.jsxs)(x,{scope:r,checked:P,disabled:f,children:[(0,n.jsx)(u.sG.button,{type:"button",role:"switch","aria-checked":P,"aria-required":p,"data-state":w(P),"data-disabled":f?"":void 0,disabled:f,value:m,...v,ref:k,onClick:(0,i.m)(e.onClick,e=>{A(e=>!e),S&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),S&&(0,n.jsx)(b,{control:y,bubbles:!C.current,name:o,value:m,checked:P,required:p,disabled:f,form:g,style:{transform:"translateX(-100%)"}})]})});g.displayName=p;var v="SwitchThumb",y=s.forwardRef((e,t)=>{let{__scopeSwitch:r,...s}=e,i=h(v,r);return(0,n.jsx)(u.sG.span,{"data-state":w(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});y.displayName=v;var b=e=>{let{control:t,checked:r,bubbles:i=!0,...a}=e,o=s.useRef(null),l=(0,d.Z)(r),u=(0,c.X)(t);return s.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==r&&t){let n=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(n)}},[l,r,i]),(0,n.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w(e){return e?"checked":"unchecked"}var j=r(4780);let k=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(g,{className:(0,j.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:(0,n.jsx)(y,{className:(0,j.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));k.displayName=g.displayName},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29526:(e,t,r)=>{"use strict";r.d(t,{m_:()=>W,ZI:()=>V,Bc:()=>B,k$:()=>X});var n=r(60687),s=r(43210),i=r(70569),a=r(98599),o=r(11273),l=r(31355),d=r(96963),c=r(55509),u=r(25028),p=r(46059),f=r(14163),m=r(8730),x=r(65551),h=r(69024),[g,v]=(0,o.A)("Tooltip",[c.Bk]),y=(0,c.Bk)(),b="TooltipProvider",w="tooltip.open",[j,k]=g(b),C=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:i=300,disableHoverableContent:a=!1,children:o}=e,[l,d]=s.useState(!0),c=s.useRef(!1),u=s.useRef(0);return s.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,n.jsx)(j,{scope:t,isOpenDelayed:l,delayDuration:r,onOpen:s.useCallback(()=>{window.clearTimeout(u.current),d(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>d(!0),i)},[i]),isPointerInTransitRef:c,onPointerInTransitChange:s.useCallback(e=>{c.current=e},[]),disableHoverableContent:a,children:o})};C.displayName=b;var S="Tooltip",[P,A]=g(S),E=e=>{let{__scopeTooltip:t,children:r,open:i,defaultOpen:a=!1,onOpenChange:o,disableHoverableContent:l,delayDuration:u}=e,p=k(S,e.__scopeTooltip),f=y(t),[m,h]=s.useState(null),g=(0,d.B)(),v=s.useRef(0),b=l??p.disableHoverableContent,j=u??p.delayDuration,C=s.useRef(!1),[A=!1,E]=(0,x.i)({prop:i,defaultProp:a,onChange:e=>{e?(p.onOpen(),document.dispatchEvent(new CustomEvent(w))):p.onClose(),o?.(e)}}),N=s.useMemo(()=>A?C.current?"delayed-open":"instant-open":"closed",[A]),T=s.useCallback(()=>{window.clearTimeout(v.current),v.current=0,C.current=!1,E(!0)},[E]),D=s.useCallback(()=>{window.clearTimeout(v.current),v.current=0,E(!1)},[E]),R=s.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{C.current=!0,E(!0),v.current=0},j)},[j,E]);return s.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),(0,n.jsx)(c.bL,{...f,children:(0,n.jsx)(P,{scope:t,contentId:g,open:A,stateAttribute:N,trigger:m,onTriggerChange:h,onTriggerEnter:s.useCallback(()=>{p.isOpenDelayed?R():T()},[p.isOpenDelayed,R,T]),onTriggerLeave:s.useCallback(()=>{b?D():(window.clearTimeout(v.current),v.current=0)},[D,b]),onOpen:T,onClose:D,disableHoverableContent:b,children:r})})};E.displayName=S;var N="TooltipTrigger",T=s.forwardRef((e,t)=>{let{__scopeTooltip:r,...o}=e,l=A(N,r),d=k(N,r),u=y(r),p=s.useRef(null),m=(0,a.s)(t,p,l.onTriggerChange),x=s.useRef(!1),h=s.useRef(!1),g=s.useCallback(()=>x.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),(0,n.jsx)(c.Mz,{asChild:!0,...u,children:(0,n.jsx)(f.sG.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...o,ref:m,onPointerMove:(0,i.m)(e.onPointerMove,e=>{"touch"===e.pointerType||h.current||d.isPointerInTransitRef.current||(l.onTriggerEnter(),h.current=!0)}),onPointerLeave:(0,i.m)(e.onPointerLeave,()=>{l.onTriggerLeave(),h.current=!1}),onPointerDown:(0,i.m)(e.onPointerDown,()=>{x.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:(0,i.m)(e.onFocus,()=>{x.current||l.onOpen()}),onBlur:(0,i.m)(e.onBlur,l.onClose),onClick:(0,i.m)(e.onClick,l.onClose)})})});T.displayName=N;var D="TooltipPortal",[R,I]=g(D,{forceMount:void 0}),_=e=>{let{__scopeTooltip:t,forceMount:r,children:s,container:i}=e,a=A(D,t);return(0,n.jsx)(R,{scope:t,forceMount:r,children:(0,n.jsx)(p.C,{present:r||a.open,children:(0,n.jsx)(u.Z,{asChild:!0,container:i,children:s})})})};_.displayName=D;var z="TooltipContent",M=s.forwardRef((e,t)=>{let r=I(z,e.__scopeTooltip),{forceMount:s=r.forceMount,side:i="top",...a}=e,o=A(z,e.__scopeTooltip);return(0,n.jsx)(p.C,{present:s||o.open,children:o.disableHoverableContent?(0,n.jsx)(L,{side:i,...a,ref:t}):(0,n.jsx)(U,{side:i,...a,ref:t})})}),U=s.forwardRef((e,t)=>{let r=A(z,e.__scopeTooltip),i=k(z,e.__scopeTooltip),o=s.useRef(null),l=(0,a.s)(t,o),[d,c]=s.useState(null),{trigger:u,onClose:p}=r,f=o.current,{onPointerInTransitChange:m}=i,x=s.useCallback(()=>{c(null),m(!1)},[m]),h=s.useCallback((e,t)=>{let r=e.currentTarget,n={x:e.clientX,y:e.clientY},s=function(e,t){let r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw Error("unreachable")}}(n,r.getBoundingClientRect());c(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:+!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let n=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x))t.pop();else break}t.push(n)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))r.pop();else break}r.push(n)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(t)}([...function(e,t,r=5){let n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,s),...function(e){let{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}(t.getBoundingClientRect())])),m(!0)},[m]);return s.useEffect(()=>()=>x(),[x]),s.useEffect(()=>{if(u&&f){let e=e=>h(e,f),t=e=>h(e,u);return u.addEventListener("pointerleave",e),f.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",t)}}},[u,f,h,x]),s.useEffect(()=>{if(d){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},n=u?.contains(t)||f?.contains(t),s=!function(e,t){let{x:r,y:n}=e,s=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){let a=t[e].x,o=t[e].y,l=t[i].x,d=t[i].y;o>n!=d>n&&r<(l-a)*(n-o)/(d-o)+a&&(s=!s)}return s}(r,d);n?x():s&&(x(),p())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,f,d,p,x]),(0,n.jsx)(L,{...e,ref:l})}),[O,F]=g(S,{isInside:!1}),L=s.forwardRef((e,t)=>{let{__scopeTooltip:r,children:i,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:d,...u}=e,p=A(z,r),f=y(r),{onClose:x}=p;return s.useEffect(()=>(document.addEventListener(w,x),()=>document.removeEventListener(w,x)),[x]),s.useEffect(()=>{if(p.trigger){let e=e=>{let t=e.target;t?.contains(p.trigger)&&x()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[p.trigger,x]),(0,n.jsx)(l.qW,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:e=>e.preventDefault(),onDismiss:x,children:(0,n.jsxs)(c.UC,{"data-state":p.stateAttribute,...f,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,n.jsx)(m.xV,{children:i}),(0,n.jsx)(O,{scope:r,isInside:!0,children:(0,n.jsx)(h.b,{id:p.contentId,role:"tooltip",children:a||i})})]})})});M.displayName=z;var H="TooltipArrow",q=s.forwardRef((e,t)=>{let{__scopeTooltip:r,...s}=e,i=y(r);return F(H,r).isInside?null:(0,n.jsx)(c.i3,{...i,...s,ref:t})});q.displayName=H;var G=r(4780);function B({delayDuration:e=0,...t}){return(0,n.jsx)(C,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function W({...e}){return(0,n.jsx)(B,{children:(0,n.jsx)(E,{"data-slot":"tooltip",...e})})}function X({...e}){return(0,n.jsx)(T,{"data-slot":"tooltip-trigger",...e})}function V({className:e,sideOffset:t=0,children:r,...s}){return(0,n.jsx)(_,{children:(0,n.jsxs)(M,{"data-slot":"tooltip-content",sideOffset:t,className:(0,G.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance",e),...s,children:[r,(0,n.jsx)(q,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},33873:e=>{"use strict";e.exports=require("path")},34568:(e,t,r)=>{Promise.resolve().then(r.bind(r,85593))},54023:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{AiSettingsForm:()=>y});var s=r(60687),i=r(43210),a=r(2733),o=r(44493),l=r(29523),d=r(85726),c=r(27479),u=r(25356),p=r(80013),f=r(15079),m=r(93613),x=r(96882),h=r(91821),g=r(29526),v=e([a]);a=(v.then?(await v)():v)[0];let b=[{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",default:!0},{id:"gpt-4",name:"GPT-4",default:!1},{id:"gpt-4-turbo",name:"GPT-4 Turbo",default:!1},{id:"claude-2",name:"Claude 2",default:!1}];function y(){let{preferences:e,isLoading:t,error:r,updateDefaultModel:n,updateMaxTokens:v,updateContextSettings:y,reset:w}=(0,a.y)(),[j,k]=(0,i.useState)(e?.maxTokensPerRequest||2e3);if(t)return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d.E,{className:"h-[200px] w-full"}),(0,s.jsx)(d.E,{className:"h-[150px] w-full"}),(0,s.jsx)(d.E,{className:"h-[180px] w-full"})]});if(r)return(0,s.jsxs)(h.Fc,{variant:"destructive",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)(h.XL,{children:"Error"}),(0,s.jsxs)(h.TN,{children:["Failed to load AI preferences: ",r.message]})]});let C=(e,t)=>{switch(e){case"includeUserHistory":y({includeUserHistory:t});break;case"includeOrganizationData":y({includeOrganizationData:t})}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(o.Card,{children:[(0,s.jsxs)(o.CardHeader,{children:[(0,s.jsx)(o.CardTitle,{children:"AI Model Settings"}),(0,s.jsx)(o.CardDescription,{children:"Configure which AI models and parameters to use for generating responses"})]}),(0,s.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"model-select",children:"Default AI Model"}),(0,s.jsxs)(f.l6,{value:e?.defaultModel||"gpt-3.5-turbo",onValueChange:e=>{n(e)},children:[(0,s.jsx)(f.bq,{id:"model-select",children:(0,s.jsx)(f.yv,{placeholder:"Select a model"})}),(0,s.jsx)(f.gC,{children:b.map(e=>(0,s.jsx)(f.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(p.J,{htmlFor:"tokens-slider",children:"Maximum Tokens per Request"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[j," tokens"]})]}),(0,s.jsx)(u.A,{id:"tokens-slider",min:500,max:8e3,step:100,value:[j],onValueChange:e=>{k(e[0])},onValueCommit:()=>{v(j)},className:"py-4"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Controls the maximum length of AI-generated responses. Higher values allow for longer responses but use more resources."})]})]})]}),(0,s.jsxs)(o.Card,{children:[(0,s.jsxs)(o.CardHeader,{children:[(0,s.jsx)(o.CardTitle,{children:"Contextual AI Behavior"}),(0,s.jsx)(o.CardDescription,{children:"Control how the AI uses context from your history and organization"})]}),(0,s.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{htmlFor:"user-history-switch",children:"Include User History"}),(0,s.jsx)(g.Bc,{children:(0,s.jsxs)(g.m_,{children:[(0,s.jsx)(g.k$,{children:(0,s.jsx)(x.A,{className:"ml-2 h-4 w-4 text-muted-foreground"})}),(0,s.jsx)(g.ZI,{children:"When enabled, the AI will consider your recent conversation history to provide more contextually relevant responses."})]})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Allow AI to reference your past conversations"})]}),(0,s.jsx)(c.d,{id:"user-history-switch",checked:e?.contextSettings?.includeUserHistory??!0,onCheckedChange:e=>C("includeUserHistory",e)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.J,{htmlFor:"org-data-switch",children:"Include Organization Data"}),(0,s.jsx)(g.Bc,{children:(0,s.jsxs)(g.m_,{children:[(0,s.jsx)(g.k$,{children:(0,s.jsx)(x.A,{className:"ml-2 h-4 w-4 text-muted-foreground"})}),(0,s.jsx)(g.ZI,{children:"When enabled, the AI can access relevant organization-specific information to provide more tailored responses."})]})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Allow AI to access your organization's shared data"})]}),(0,s.jsx)(c.d,{id:"org-data-switch",checked:e?.contextSettings?.includeOrganizationData??!0,onCheckedChange:e=>C("includeOrganizationData",e)})]}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(p.J,{htmlFor:"context-window-slider",children:"Context Window Size"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e?.contextSettings?.contextWindowSize||10," messages"]})]}),(0,s.jsx)(u.A,{id:"context-window-slider",min:1,max:20,step:1,value:[e?.contextSettings?.contextWindowSize||10],onValueChange:e=>{y({contextWindowSize:e[0]})},className:"py-4"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Determines how many previous messages the AI will consider when generating responses."})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end space-x-2 pt-2",children:(0,s.jsx)(l.$,{variant:"outline",onClick:()=>w(),children:"Reset to Defaults"})})]})}n()}catch(e){n(e)}})},61333:e=>{"use strict";e.exports=import("@trpc/server")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74843:e=>{"use strict";e.exports=import("@trpc/server/observable")},78148:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var n=r(43210),s=r(14163),i=r(60687),a=n.forwardRef((e,t)=>(0,i.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var o=a},79551:e=>{"use strict";e.exports=require("url")},80013:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var n=r(60687),s=r(43210),i=r(78148),a=r(24224),o=r(4780);let l=(0,a.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(i.b,{ref:r,className:(0,o.cn)(l(),e),...t}));d.displayName=i.b.displayName},85593:(e,t,r)=>{"use strict";r.d(t,{AiSettingsForm:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call AiSettingsForm() from the server but AiSettingsForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jacob/projects/nuco/src/components/settings/AiSettingsForm.tsx","AiSettingsForm")},91821:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>o,TN:()=>d,XL:()=>l});var n=r(60687);r(43210);var s=r(24224),i=r(4780);let a=(0,s.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return(0,n.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,i.cn)(a({variant:t}),e),...r})}function l({className:e,...t}){return(0,n.jsx)("div",{"data-slot":"alert-title",className:(0,i.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function d({className:e,...t}){return(0,n.jsx)("div",{"data-slot":"alert-description",className:(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}},93613:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(62688).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},96882:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(62688).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},98120:(e,t,r)=>{Promise.resolve().then(r.bind(r,54023))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4447,4017,7917,1658,6034,4779,2943,262],()=>r(18622));module.exports=n})();