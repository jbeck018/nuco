(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9274],{35695:(t,e,a)=>{"use strict";var r=a(18999);a.o(r,"redirect")&&a.d(e,{redirect:function(){return r.redirect}}),a.o(r,"useParams")&&a.d(e,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(e,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(e,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(e,{useSearchParams:function(){return r.useSearchParams}})},38703:(t,e,a)=>{"use strict";a.d(e,{OrganizationProvider:()=>c,Z:()=>s});var r=a(95155),n=a(12115),i=a(35695),o=a(80872);let u=(0,n.createContext)(void 0);function s(){let t=(0,n.useContext)(u);return void 0===t?{organizations:[],currentOrganization:void 0,isLoading:!1,error:null,setCurrentOrganizationBySlug:async t=>{},setCurrentOrganizationById:async t=>{},refreshOrganizations:async()=>[]}:t}function c(t){let{children:e,initialOrganizationSlug:a}=t,[s,c]=(0,n.useState)(void 0),[l,d]=(0,n.useState)(void 0),[g,y]=(0,n.useState)(!0),[h,f]=(0,n.useState)(null),v=(0,i.useRouter)(),z=(0,i.usePathname)(),[w,P]=(0,n.useState)(!1),m=(0,o._K)(),E=(0,n.useCallback)(async()=>{try{y(!0);let t=await m.organization.getAll.query();return c(t),t}catch(t){return f(t instanceof Error?t:Error("Failed to fetch organizations")),[]}finally{y(!1)}},[m]),S=async(t,e)=>{try{y(!0);let a=await m.organization.getBySlug.query({slug:t});d(a),(null==e?void 0:e.noRedirect)||!z||z.includes("/settings/")||v.push("/org/".concat(t))}catch(e){f(e instanceof Error?e:Error("Failed to fetch organization with slug: ".concat(t)))}finally{y(!1)}},B=async(t,e)=>{try{y(!0);let a=await m.organization.getById.query({id:t});d(a),(null==e?void 0:e.noRedirect)||!z||z.includes("/settings/")||v.push("/org/".concat(a.slug))}catch(e){f(e instanceof Error?e:Error("Failed to fetch organization with id: ".concat(t)))}finally{y(!1)}},_=async()=>{let t=await E();if(l)try{let t=await m.organization.getById.query({id:l.id});d(t)}catch(t){d(void 0)}return t};return(0,n.useEffect)(()=>{!w&&(async()=>{try{let t=await E();if(a&&t.length>0)try{let t=await m.organization.getBySlug.query({slug:a});d(t)}catch(e){if(t.length>0)try{let e=await m.organization.getById.query({id:t[0].id});d(e)}catch(t){}}else if(t.length>0)try{let e=await m.organization.getById.query({id:t[0].id});d(e)}catch(t){}}catch(t){}finally{P(!0)}})()},[a,E,w,m]),(0,r.jsx)(u.Provider,{value:{organizations:s,currentOrganization:l,isLoading:g,error:h,setCurrentOrganizationBySlug:S,setCurrentOrganizationById:B,refreshOrganizations:_},children:e})}},80872:(t,e,a)=>{"use strict";a.d(e,{_K:()=>s,n6:()=>u,xh:()=>o});var r=a(87017),n=a(31213),i=a(89071);let{TRPCProvider:o,useTRPC:u,useTRPCClient:s}=(0,i.dW)(),c=new r.E,l=(0,n.XT)({links:[(0,n.fu)({url:"/api/trpc"})]});(0,i.AL)({client:l,queryClient:c})},96533:(t,e,a)=>{Promise.resolve().then(a.bind(a,38703))}},t=>{var e=e=>t(t.s=e);t.O(0,[5543,8441,1684,7358],()=>e(96533)),_N_E=t.O()}]);