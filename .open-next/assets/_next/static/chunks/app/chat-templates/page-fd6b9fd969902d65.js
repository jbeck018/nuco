(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3803],{17313:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>o,av:()=>d,j7:()=>l,tU:()=>n});var s=a(95155);a(12115);var r=a(60704),i=a(59434);function n(e){let{className:t,...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-2 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...a})}},26126:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var s=a(95155);a(12115);var r=a(99708),i=a(74466),n=a(59434);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,asChild:i=!1,...o}=e,d=i?r.DX:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(l({variant:a}),t),...o})}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var s=a(95155);a(12115);var r=a(99708),i=a(74466),n=a(59434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:i,asChild:o=!1,...d}=e,c=o?r.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:a,size:i,className:t})),...d})}},43751:(e,t,a)=>{Promise.resolve().then(a.bind(a,78873))},59434:(e,t,a)=>{"use strict";a.d(t,{IM:()=>n,cn:()=>i,jP:()=>l});var s=a(52596),r=a(39688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}function n(e){return e.split(" ").map(e=>e[0]).join("")}async function l(e,t){for await(let a of e.textStream)t(a)}a(49509)},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(95155),r=a(12115),i=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},66695:(e,t,a)=>{"use strict";a.d(t,{Card:()=>n,CardContent:()=>c,CardDescription:()=>d,CardFooter:()=>u,CardHeader:()=>l,CardTitle:()=>o});var s=a(95155),r=a(12115),i=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},78873:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95155),r=a(12115),i=a(35695),n=a(30285),l=a(62523),o=a(66695),d=a(26126),c=a(17313),u=a(49103),f=a(47924),m=a(43332),p=a(24357),v=a(13717),x=a(62525),h=a(88262),g=a(66320);function b(){var e;let{data:t}=(0,g.wV)(),a=(0,i.useRouter)(),{toast:b}=(0,h.dj)(),[j,y]=(0,r.useState)([]),[N,w]=(0,r.useState)(""),[C,T]=(0,r.useState)([]),[S,E]=(0,r.useState)(!0),[k,A]=(0,r.useState)("my"),O=Array.from(new Set(j.flatMap(e=>e.tags))).sort();(0,r.useEffect)(()=>{(null==t?void 0:t.user)&&(async()=>{E(!0);try{var e;let a=new URLSearchParams;N&&a.append("search",N),C.length>0&&a.append("tags",C.join(",")),"organization"===k&&(null===(e=t.user)||void 0===e?void 0:e.defaultOrganizationId)&&a.append("organizationId",t.user.defaultOrganizationId);let s=await fetch("/api/chat-templates?".concat(a.toString()));if(!s.ok)throw Error("Failed to fetch templates");let r=await s.json();y(r)}catch(e){b({title:"Error",description:"Failed to load templates",variant:"destructive"})}finally{E(!1)}})()},[t,N,C,k,b]);let _=e=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},z=async e=>{if(confirm("Are you sure you want to delete this template?"))try{if(!(await fetch("/api/chat-templates/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete template");y(t=>t.filter(t=>t.id!==e)),b({title:"Success",description:"Template deleted successfully"})}catch(e){b({title:"Error",description:"Failed to delete template",variant:"destructive"})}},I=async e=>{try{var a;let{name:s,description:r,content:i,variables:n,tags:l,isPublic:o,organizationId:d}=e;if(!(await fetch("/api/chat-templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(s," (Copy)"),description:r,content:i,variables:n,tags:l,isPublic:o,organizationId:d})})).ok)throw Error("Failed to duplicate template");let c=await fetch("/api/chat-templates?".concat("organization"===k&&(null==t?void 0:null===(a=t.user)||void 0===a?void 0:a.defaultOrganizationId)?"organizationId=".concat(t.user.defaultOrganizationId):"")),u=await c.json();y(u),b({title:"Success",description:"Template duplicated successfully"})}catch(e){b({title:"Error",description:"Failed to duplicate template",variant:"destructive"})}};return(0,s.jsxs)("div",{className:"container mx-auto py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Prompt Templates"}),(0,s.jsxs)(n.$,{onClick:()=>a.push("/chat-templates/new"),children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Create Template"]})]}),(0,s.jsx)(c.tU,{defaultValue:"my",className:"mb-6",onValueChange:A,children:(0,s.jsxs)(c.j7,{children:[(0,s.jsx)(c.Xi,{value:"my",children:"My Templates"}),(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.defaultOrganizationId)&&(0,s.jsx)(c.Xi,{value:"organization",children:"Organization Templates"})]})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[(0,s.jsx)("div",{className:"w-full md:w-3/4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(l.p,{placeholder:"Search templates...",className:"pl-10",value:N,onChange:e=>w(e.target.value)})]})}),(0,s.jsx)("div",{className:"w-full md:w-1/4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"}),O.map(e=>(0,s.jsx)(d.E,{variant:C.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>_(e),children:e},e))]})})]}),S?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):0===j.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("h3",{className:"text-xl font-medium mb-2",children:"No templates found"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:N||C.length>0?"Try adjusting your search or filters":"Create your first prompt template to get started"}),(0,s.jsxs)(n.$,{onClick:()=>a.push("/chat-templates/new"),children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Create Template"]})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>{var r;return(0,s.jsxs)(o.Card,{className:"overflow-hidden",children:[(0,s.jsxs)(o.CardHeader,{className:"pb-3",children:[(0,s.jsx)(o.CardTitle,{className:"text-xl",children:e.name}),(0,s.jsx)(o.CardDescription,{className:"line-clamp-2",children:e.description||"No description provided"})]}),(0,s.jsxs)(o.CardContent,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-1",children:"Variables:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.variables.length>0?e.variables.map((e,t)=>(0,s.jsx)(d.E,{variant:"secondary",children:e.name},t)):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No variables"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-1",children:"Tags:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.length>0?e.tags.map((e,t)=>(0,s.jsx)(d.E,{variant:"outline",children:e},t)):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No tags"})})]})]}),(0,s.jsxs)(o.CardFooter,{className:"flex justify-between pt-3 border-t",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(d.E,{variant:e.isPublic?"default":"secondary",className:"text-xs",children:e.isPublic?"Public":"Private"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>I(e),title:"Duplicate",children:(0,s.jsx)(p.A,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>a.push("/chat-templates/".concat(e.id)),title:"Edit",children:(0,s.jsx)(v.A,{className:"h-4 w-4"})}),(null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.id)===e.userId&&(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>z(e.id),title:"Delete",children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})]})]})]},e.id)})})]})}},88262:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f,oR:()=>u});var s=a(12115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,1603,4052,6066,8441,1684,7358],()=>t(43751)),_N_E=e.O()}]);