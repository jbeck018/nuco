(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1953],{12441:(e,t,r)=>{Promise.resolve().then(r.bind(r,49479))},22346:(e,t,r)=>{"use strict";r.d(t,{w:()=>o});var a=r(95155),n=r(12115),s=r(87489),i=r(59434);let o=n.forwardRef((e,t)=>{let{className:r,orientation:n="horizontal",decorative:o=!0,...l}=e;return(0,a.jsx)(s.b,{ref:t,decorative:o,orientation:n,className:(0,i.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...l})});o.displayName=s.b.displayName},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(95155);r(12115);var n=r(99708),s=r(74466),i=r(59434);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:s,asChild:l=!1,...d}=e,c=l?n.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:s,className:t})),...d})}},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},38703:(e,t,r)=>{"use strict";r.d(t,{OrganizationProvider:()=>d,Z:()=>l});var a=r(95155),n=r(12115),s=r(35695),i=r(80872);let o=(0,n.createContext)(void 0);function l(){let e=(0,n.useContext)(o);return void 0===e?{organizations:[],currentOrganization:void 0,isLoading:!1,error:null,setCurrentOrganizationBySlug:async e=>{},setCurrentOrganizationById:async e=>{},refreshOrganizations:async()=>[]}:e}function d(e){let{children:t,initialOrganizationSlug:r}=e,[l,d]=(0,n.useState)(void 0),[c,u]=(0,n.useState)(void 0),[f,m]=(0,n.useState)(!0),[g,h]=(0,n.useState)(null),x=(0,s.useRouter)(),p=(0,s.usePathname)(),[v,y]=(0,n.useState)(!1),b=(0,i._K)(),j=(0,n.useCallback)(async()=>{try{m(!0);let e=await b.organization.getAll.query();return d(e),e}catch(e){return h(e instanceof Error?e:Error("Failed to fetch organizations")),[]}finally{m(!1)}},[b]),w=async(e,t)=>{try{m(!0);let r=await b.organization.getBySlug.query({slug:e});u(r),(null==t?void 0:t.noRedirect)||!p||p.includes("/settings/")||x.push("/org/".concat(e))}catch(t){h(t instanceof Error?t:Error("Failed to fetch organization with slug: ".concat(e)))}finally{m(!1)}},N=async(e,t)=>{try{m(!0);let r=await b.organization.getById.query({id:e});u(r),(null==t?void 0:t.noRedirect)||!p||p.includes("/settings/")||x.push("/org/".concat(r.slug))}catch(t){h(t instanceof Error?t:Error("Failed to fetch organization with id: ".concat(e)))}finally{m(!1)}},z=async()=>{let e=await j();if(c)try{let e=await b.organization.getById.query({id:c.id});u(e)}catch(e){u(void 0)}return e};return(0,n.useEffect)(()=>{!v&&(async()=>{try{let e=await j();if(r&&e.length>0)try{let e=await b.organization.getBySlug.query({slug:r});u(e)}catch(t){if(e.length>0)try{let t=await b.organization.getById.query({id:e[0].id});u(t)}catch(e){}}else if(e.length>0)try{let t=await b.organization.getById.query({id:e[0].id});u(t)}catch(e){}}catch(e){}finally{y(!0)}})()},[r,j,v,b]),(0,a.jsx)(o.Provider,{value:{organizations:l,currentOrganization:c,isLoading:f,error:g,setCurrentOrganizationBySlug:w,setCurrentOrganizationById:N,refreshOrganizations:z},children:t})}},49479:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(95155),n=r(12115),s=r(6874),i=r.n(s),o=r(35695),l=r(66320),d=r(38703),c=r(91737),u=r(59434),f=r(30285),m=r(59409),g=r(22346);function h(e){let{children:t}=e,r=(0,o.usePathname)(),{status:s}=(0,l.wV)(),{organizations:h}=(0,c.Ph)(),{currentOrganization:x,setCurrentOrganizationById:p}=(0,d.Z)(),[v,y]=(0,n.useState)(null==x?void 0:x.id);"unauthenticated"===s&&(0,o.redirect)("/auth/login"),(0,n.useEffect)(()=>{(null==x?void 0:x.id)&&x.id!==v&&y(x.id)},[x,v]);let b=e=>{y(e),p(e,{noRedirect:!0})},j=v?[{title:"General",href:"/settings/organization/".concat(v,"/general"),description:"Manage organization details"},{title:"Members",href:"/settings/organization/".concat(v,"/members"),description:"Manage team members"},{title:"Billing",href:"/settings/organization/".concat(v,"/billing"),description:"Manage subscription and billing"}]:[];return(0,a.jsx)("div",{className:"container mx-auto py-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-8 md:flex-row",children:[(0,a.jsx)("aside",{className:"md:w-72",children:(0,a.jsxs)("div",{className:"sticky top-8",children:[(0,a.jsxs)("div",{className:"mb-6 px-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Settings"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your account and organizations"})]}),(0,a.jsxs)("nav",{className:"flex flex-col space-y-6 rounded-lg border bg-card shadow-sm",children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"mb-3 font-medium text-sm uppercase tracking-wider text-muted-foreground",children:"Personal Settings"}),(0,a.jsx)("div",{className:"flex flex-col -mx-2",children:[{title:"Profile",href:"/settings/profile",description:"Manage your personal information"}].map(e=>{let t=r===e.href;return(0,a.jsx)(f.$,{variant:t?"default":"ghost",className:(0,u.cn)("justify-start h-auto py-3 px-3 mb-1 rounded-md",t?"bg-primary text-primary-foreground":"hover:bg-accent"),asChild:!0,children:(0,a.jsx)(i(),{href:e.href,children:(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("span",{className:"font-medium",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})})},e.href)})})]}),(0,a.jsx)(g.w,{}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"mb-3 font-medium text-sm uppercase tracking-wider text-muted-foreground",children:"Organization Settings"}),(0,a.jsx)("div",{className:"mb-4 bg-accent/50 p-3 rounded-md",children:h&&h.length>0?(0,a.jsxs)(m.l6,{value:v,onValueChange:e=>b(e),disabled:!h.length,children:[(0,a.jsx)(m.bq,{className:"w-full border-accent-foreground/20",children:(0,a.jsx)(m.yv,{placeholder:"Select organization"})}),(0,a.jsx)(m.gC,{children:h.map(e=>(0,a.jsx)(m.eb,{value:e.id,children:e.name},e.id))})]}):(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"No organizations found"})}),v&&(0,a.jsx)("div",{className:"flex flex-col -mx-2",children:j.map(e=>{let t=r===e.href;return(0,a.jsx)(f.$,{variant:t?"default":"ghost",className:(0,u.cn)("justify-start h-auto py-3 px-3 mb-1 rounded-md",t?"bg-primary text-primary-foreground":"hover:bg-accent"),asChild:!0,disabled:!v,children:(0,a.jsx)(i(),{href:e.href,children:(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("span",{className:"font-medium",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})})},e.href)})})]})]})]})}),(0,a.jsx)("main",{className:"flex-1",children:t})]})})}},59409:(e,t,r)=>{"use strict";r.d(t,{bq:()=>u,eb:()=>m,gC:()=>f,l6:()=>d,yv:()=>c});var a=r(95155);r(12115);var n=r(31992),s=r(66474),i=r(5196),o=r(47863),l=r(59434);function d(e){let{...t}=e;return(0,a.jsx)(n.bL,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,a.jsx)(n.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,children:r,...i}=e;return(0,a.jsxs)(n.l9,{"data-slot":"select-trigger",className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[r,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(s.A,{className:"size-4 opacity-50"})})]})}function f(e){let{className:t,children:r,position:s="popper",...i}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...i,children:[(0,a.jsx)(g,{}),(0,a.jsx)(n.LM,{className:(0,l.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),(0,a.jsx)(h,{})]})})}function m(e){let{className:t,children:r,...s}=e;return(0,a.jsxs)(n.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(i.A,{className:"size-4"})})}),(0,a.jsx)(n.p4,{children:r})]})}function g(e){let{className:t,...r}=e;return(0,a.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(o.A,{className:"size-4"})})}function h(e){let{className:t,...r}=e;return(0,a.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(s.A,{className:"size-4"})})}},59434:(e,t,r)=>{"use strict";r.d(t,{IM:()=>i,cn:()=>s,jP:()=>o});var a=r(52596),n=r(39688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}function i(e){return e.split(" ").map(e=>e[0]).join("")}async function o(e,t){for await(let r of e.textStream)t(r)}r(49509)},80872:(e,t,r)=>{"use strict";r.d(t,{_K:()=>l,n6:()=>o,xh:()=>i});var a=r(87017),n=r(31213),s=r(89071);let{TRPCProvider:i,useTRPC:o,useTRPCClient:l}=(0,s.dW)(),d=new a.E,c=(0,n.XT)({links:[(0,n.fu)({url:"/api/trpc"})]});(0,s.AL)({client:c,queryClient:d})},82284:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var a=r(12115),n=r(46081),s=r(6101),i=r(99708),o=r(95155);function l(e){let t=e+"CollectionProvider",[r,l]=(0,n.A)(t),[d,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:t,children:r}=e,n=a.useRef(null),s=a.useRef(new Map).current;return(0,o.jsx)(d,{scope:t,itemMap:s,collectionRef:n,children:r})};u.displayName=t;let f=e+"CollectionSlot",m=a.forwardRef((e,t)=>{let{scope:r,children:a}=e,n=c(f,r),l=(0,s.s)(t,n.collectionRef);return(0,o.jsx)(i.DX,{ref:l,children:a})});m.displayName=f;let g=e+"CollectionItemSlot",h="data-radix-collection-item",x=a.forwardRef((e,t)=>{let{scope:r,children:n,...l}=e,d=a.useRef(null),u=(0,s.s)(t,d),f=c(g,r);return a.useEffect(()=>(f.itemMap.set(d,{ref:d,...l}),()=>void f.itemMap.delete(d))),(0,o.jsx)(i.DX,{[h]:"",ref:u,children:n})});return x.displayName=g,[{Provider:u,Slot:m,ItemSlot:x},function(t){let r=c(e+"CollectionConsumer",t);return a.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll("[".concat(h,"]")));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},l]}},87489:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var a=r(12115),n=r(63655),s=r(95155),i="horizontal",o=["horizontal","vertical"],l=a.forwardRef((e,t)=>{var r;let{decorative:a,orientation:l=i,...d}=e,c=(r=l,o.includes(r))?l:i;return(0,s.jsx)(n.sG.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});l.displayName="Separator";var d=l},91737:(e,t,r)=>{"use strict";r.d(t,{Ph:()=>d,cJ:()=>c,sb:()=>o,t3:()=>l});var a=r(80872),n=r(19373),s=r(5041),i=r(26715);let o=()=>{let e=(0,a.n6)(),{data:t,isLoading:r,error:s,refetch:i}=(0,n.I)(e.user.me.queryOptions());return{profile:t,isLoading:r,error:s,refetch:i}},l=()=>{let e=(0,a.n6)(),t=(0,i.jE)();return(0,s.n)(e.user.updateProfile.mutationOptions({onMutate:async r=>{await t.cancelQueries(e.user.me.pathFilter());let a=t.getQueryData(e.user.me.queryKey());return t.setQueryData(e.user.me.queryKey(),e=>e?{...e,...r}:e),{previousData:a}},onError:(r,a,n)=>{t.setQueryData(e.user.me.queryKey(),null==n?void 0:n.previousData)},onSettled:()=>{t.invalidateQueries(e.user.me.pathFilter())}}))},d=()=>{let e=(0,a.n6)(),{data:t,isLoading:r,error:s,refetch:i}=(0,n.I)(e.organization.getAll.queryOptions());return{organizations:t||[],isLoading:r,error:s,refetch:i}},c=e=>{let t=(0,a.n6)(),{data:r,isLoading:s,error:i,refetch:o}=(0,n.I)(t.integration.getAll.queryOptions(e?{organizationId:e}:void 0));return{integrations:r||[],isLoading:s,error:i,refetch:o}}},94315:(e,t,r)=>{"use strict";r.d(t,{jH:()=>s});var a=r(12115);r(95155);var n=a.createContext(void 0);function s(e){let t=a.useContext(n);return e||t||"ltr"}}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,1603,5543,8595,8333,9205,6544,6874,8441,1684,7358],()=>t(12441)),_N_E=e.O()}]);