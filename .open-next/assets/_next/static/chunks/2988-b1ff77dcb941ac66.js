"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2988],{13897:(e,t,n)=>{n.d(t,{F4:()=>a,Rr:()=>u,Su:()=>s,fZ:()=>i});var o=n(51617);let r={defaultModel:"gpt-3.5-turbo",maxTokensPerRequest:2e3,promptTemplates:[],contextSettings:{includeUserHistory:!0,includeOrganizationData:!0,contextWindowSize:10}};function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gpt-3.5-turbo";return e&&e.defaultModel||t}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return e&&e.maxTokensPerRequest||t}function u(e){let t={includeUserHistory:!0,includeOrganizationData:!0,contextWindowSize:10};return e&&e.contextSettings?{includeUserHistory:void 0!==e.contextSettings.includeUserHistory?e.contextSettings.includeUserHistory:t.includeUserHistory,includeOrganizationData:void 0!==e.contextSettings.includeOrganizationData?e.contextSettings.includeOrganizationData:t.includeOrganizationData,contextWindowSize:void 0!==e.contextSettings.contextWindowSize?e.contextSettings.contextWindowSize:t.contextWindowSize}:t}function s(e){return(0,o.a)(e)?e:r}},50993:(e,t,n)=>{n.d(t,{c5:()=>p});var o=n(55594);let r=o.z.enum(["openai","anthropic","google","custom"]);o.z.object({id:o.z.string(),name:o.z.string(),provider:r,contextWindow:o.z.number(),maxOutputTokens:o.z.number().optional(),temperature:o.z.number().min(0).max(2).default(.7),topP:o.z.number().min(0).max(1).default(1),frequencyPenalty:o.z.number().min(0).max(2).default(0),presencePenalty:o.z.number().min(0).max(2).default(0),costPer1kInput:o.z.number().default(0),costPer1kOutput:o.z.number().default(0),inputTokenCounter:o.z.function().args(o.z.string()).returns(o.z.promise(o.z.number())).optional(),outputTokenCounter:o.z.function().args(o.z.string()).returns(o.z.promise(o.z.number())).optional()});let i=[{id:"gpt-4o",name:"GPT-4o",provider:"openai",contextWindow:128e3,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.005,costPer1kOutput:.015},{id:"gpt-4-turbo",name:"GPT-4 Turbo",provider:"openai",contextWindow:128e3,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.01,costPer1kOutput:.03},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",provider:"openai",contextWindow:16385,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:5e-4,costPer1kOutput:.0015},{id:"claude-3-opus",name:"Claude 3 Opus",provider:"anthropic",contextWindow:2e5,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.015,costPer1kOutput:.075},{id:"claude-3-sonnet",name:"Claude 3 Sonnet",provider:"anthropic",contextWindow:2e5,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.003,costPer1kOutput:.015},{id:"claude-3-haiku",name:"Claude 3 Haiku",provider:"anthropic",contextWindow:2e5,maxOutputTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:25e-5,costPer1kOutput:.00125},{id:"gemini-pro",name:"Gemini Pro",provider:"google",contextWindow:32768,maxOutputTokens:2048,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:25e-5,costPer1kOutput:5e-4},{id:"gemini-ultra",name:"Gemini Ultra",provider:"google",contextWindow:32768,maxOutputTokens:2048,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,costPer1kInput:.00125,costPer1kOutput:.00375}];var a=n(72480),u=n(23736),s=function(e){return e.RATE_LIMIT="rate_limit",e.TOKEN_LIMIT="token_limit",e.INVALID_REQUEST="invalid_request",e.AUTHENTICATION="authentication",e.PERMISSIONS="permissions",e.SERVER_ERROR="server_error",e.CONNECTION="connection",e.TIMEOUT="timeout",e.UNKNOWN="unknown",e}({});class c extends Error{constructor(e,t="unknown",n){super(e),this.name="OpenAIError",this.type=t,this.status=n}}async function l(e,t,n){if("openai"!==t.provider)throw Error("Model ".concat(t.id," is not an OpenAI model"));try{return(0,u.gM)({model:(0,a.N)(t.id),messages:e,temperature:t.temperature})}catch(e){throw function(e){if("object"==typeof e&&null!==e){var t,n,o,r;if(429===e.status||(null===(t=e.error)||void 0===t?void 0:t.type)==="rate_limit_exceeded"){let t=(null===(o=e.headers)||void 0===o?void 0:o["retry-after"])?parseInt(e.headers["retry-after"],10):void 0,n=new c("Rate limit exceeded. Please try again later.","rate_limit",429);return n.retryAfter=t,n}if(400===e.status&&(null===(n=e.error)||void 0===n?void 0:n.code)==="context_length_exceeded")return new c("The input is too long for the model to process. Please reduce the length of your prompt.","token_limit",400);if(401===e.status)return new c("Authentication error: Invalid API key or token.","authentication",401);if(403===e.status)return new c("You do not have permission to access this resource or model.","permissions",403);if(e.status>=500)return new c("OpenAI server error. Please try again later.","server_error",e.status);if(400===e.status)return new c((null===(r=e.error)||void 0===r?void 0:r.message)||"Invalid request to OpenAI API.","invalid_request",400);if(e.message)return new c(String(e.message))}return e instanceof Error?e.message.includes("timeout")||e.message.includes("ETIMEDOUT")?new c("Request to OpenAI API timed out. Please try again later.","timeout"):e.message.includes("ECONNREFUSED")||e.message.includes("ENOTFOUND")?new c("Could not connect to OpenAI API. Please check your internet connection.","connection"):new c(e.message):new c("An unknown error occurred with the OpenAI API.","unknown")}(e)}}class d extends Error{constructor(e,t,n="unknown",o){super(e),this.name="AIServiceError",this.provider=t,this.status=o,this.type=n}}async function p(e){var t,n,o,r,a;let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=u.modelId||"gpt-3.5-turbo",g=i.find(e=>e.id===f);if(!g)throw new d("Model ".concat(f," not found"),"custom","invalid_model");let v={...g,temperature:null!==(t=u.temperature)&&void 0!==t?t:g.temperature,topP:null!==(n=u.topP)&&void 0!==n?n:g.topP,frequencyPenalty:null!==(o=u.frequencyPenalty)&&void 0!==o?o:g.frequencyPenalty,presencePenalty:null!==(r=u.presencePenalty)&&void 0!==r?r:g.presencePenalty,maxOutputTokens:null!==(a=u.maxTokens)&&void 0!==a?a:g.maxOutputTokens},y=function(e,t){let n=[];return t&&n.push({role:"system",content:t}),n.push(...e),n}(e,u.systemPrompt);try{switch(g.provider){case"openai":return await l(y,v,u.functions);case"anthropic":throw new d("Anthropic provider not implemented yet","anthropic","not_implemented");case"google":throw new d("Google provider not implemented yet","google","not_implemented");case"custom":throw new d("Custom provider not implemented yet","custom","not_implemented");default:throw new d("Unsupported provider: ".concat(g.provider),"custom","invalid_provider")}}catch(t){if(t instanceof c){let n=new d(t.message,"openai",t.type,t.status);if(n.retryAfter=t.retryAfter,t.type===s.RATE_LIMIT&&m<3){let n=t.retryAfter?1e3*t.retryAfter:Math.min(1e3*Math.pow(2,m)*(.3*Math.random()+.85),6e4);return await new Promise(e=>setTimeout(e,n)),p(e,u,m+1)}throw n}if(t instanceof Error)throw new d(t.message,g.provider,"unknown");throw new d("Unknown error",g.provider,"unknown")}}},79872:(e,t,n)=>{n.d(t,{wo:()=>o});function o(e){var t;let n=function(e,t){var n,o;let r=[];if(!t)return r;let i=e.toLowerCase();return(null===(n=t.organizationData)||void 0===n?void 0:n.name)&&i.includes(t.organizationData.name.toLowerCase())&&r.push("organization-name"),(null===(o=t.organizationData)||void 0===o?void 0:o.industry)&&i.includes(t.organizationData.industry.toLowerCase())&&r.push("organization-industry"),(i.includes("previous")||i.includes("before")||i.includes("earlier")||i.includes("last time"))&&r.push("conversation-history"),(i.includes("preference")||i.includes("settings")||i.includes("role")||i.includes("my job"))&&r.push("user-preferences"),r}(e.userPrompt,e.contextData);return e.template,function(e){let{userPrompt:t,systemPrompt:n="",aiSettings:o,contextData:r}=e,i=function(e){var t;let{systemPrompt:n="",aiSettings:o,contextData:r}=e,i=n||"You are a helpful AI assistant.",a=(null==r?void 0:r.contextSettings)||(null==o?void 0:o.contextSettings)||{includeUserHistory:!0,includeOrganizationData:!0,contextWindowSize:10};if(a.includeUserHistory&&(null==r?void 0:null===(t=r.userConversationHistory)||void 0===t?void 0:t.length)){let e=a.contextWindowSize,t=r.userConversationHistory.slice(-e).map(e=>"".concat(e.role,": ").concat(e.content)).join("\n");i+="\n\nRecent conversation history:\n".concat(t)}if(a.includeOrganizationData&&(null==r?void 0:r.organizationData)){let{name:e,domain:t,industry:n,customData:o}=r.organizationData;if(i+="\n\nOrganization context:",e&&(i+="\nOrganization name: ".concat(e)),t&&(i+="\nDomain: ".concat(t)),n&&(i+="\nIndustry: ".concat(n)),o&&Object.keys(o).length>0)for(let[e,t]of(i+="\nAdditional organization information:",Object.entries(o)))i+="\n- ".concat(e,": ").concat(t)}if(null==r?void 0:r.userData){let{role:e,preferences:t,customData:n}=r.userData;if(i+="\n\nUser context:",e&&(i+="\nUser role: ".concat(e)),t&&Object.keys(t).length>0)for(let[e,n]of(i+="\nUser preferences:",Object.entries(t)))i+="\n- ".concat(e,": ").concat(n);if(n&&Object.keys(n).length>0)for(let[e,t]of(i+="\nAdditional user information:",Object.entries(n)))i+="\n- ".concat(e,": ").concat(t)}return i}({userPrompt:t,systemPrompt:n,aiSettings:o,contextData:r}),a=[];return i&&a.push({role:"system",content:i}),a.push({role:"user",content:t}),a}({...e,contextData:e.contextData?{...e.contextData,userData:{...e.contextData.userData,customData:{...(null===(t=e.contextData.userData)||void 0===t?void 0:t.customData)||{},relevantContextItems:n}}}:void 0})}},88539:(e,t,n)=>{n.d(t,{T:()=>i});var o=n(95155);n(12115);var r=n(59434);function i(e){let{className:t,...n}=e;return(0,o.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...n})}}}]);