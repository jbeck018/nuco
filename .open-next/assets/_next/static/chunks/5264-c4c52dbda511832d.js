(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5264],{38604:(e,t,a)=>{"use strict";a.d(t,{f:()=>eS});var n={};a.r(n),a.d(n,{accounts:()=>T,accountsRelations:()=>M,apiTokens:()=>$,apiTokensRelations:()=>L,authenticators:()=>eb,conversations:()=>H,conversationsRelations:()=>V,embeddings:()=>Y,embeddingsRelations:()=>G,extensionLogs:()=>et,extensionMarketplace:()=>Z,extensionReviews:()=>ea,extensionStorage:()=>ee,extensions:()=>X,insertIntegrationSettingsSchema:()=>ek,insertMetadataSchema:()=>es,insertOrganizationSettingsSchema:()=>eR,insertUserPreferencesSchema:()=>ew,integrationSettings:()=>eI,integrationTypeEnum:()=>w,integrations:()=>K,integrationsRelations:()=>S,messages:()=>O,messagesRelations:()=>B,metadata:()=>el,organizationMembers:()=>z,organizationMembersRelations:()=>j,organizationRoleEnum:()=>Q,organizationSettings:()=>ex,organizations:()=>C,organizationsRelations:()=>D,promptTemplates:()=>er,promptTemplatesRelations:()=>eu,roleEnum:()=>E,selectIntegrationSettingsSchema:()=>eq,selectMetadataSchema:()=>eo,selectOrganizationSettingsSchema:()=>eh,selectUserPreferencesSchema:()=>eQ,sessions:()=>P,sessionsRelations:()=>F,slackAIPerformance:()=>eN,slackChannelActivity:()=>e_,slackEventTypes:()=>ec,slackEvents:()=>em,slackUsageMetrics:()=>ep,slackUserActivity:()=>ef,usageRecords:()=>eg,usageRecordsRelations:()=>ev,userPreferences:()=>eE,users:()=>J,usersRelations:()=>U,verificationTokens:()=>ey});var d=a(95155),i=a(12115),l=a(35695),s=a(88262),o=a(30285),r=a(66695),u=a(26126),c=a(68856),m=a(80872),p=a(98266);let f=a(49509).env.STRIPE_SECRET_KEY;new p.A(f||"",{apiVersion:"2025-02-24.acacia",appInfo:{name:"Nuco-App",version:"0.1.0"}});var _=a(75778),N=a(73699),g=a(97967),v=a(14070),y=a(53162),x=a(99046),h=a(37597),R=a(35071),I=a(25020),q=a(39786),k=a(7136);let E=(0,k.rL)("role",["user","admin"]),Q=(0,k.rL)("organization_role",["member","admin","owner"]),w=(0,k.rL)("integration_type",["salesforce","hubspot","google","slack"]);var b=a(21295),A=a(1775);let z=(0,v.cJ)("organization_members",{id:(0,y.uR)("id").defaultRandom().notNull().unique(),organizationId:(0,y.uR)("organization_id").notNull().references(()=>C.id,{onDelete:"cascade"}),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),role:Q("role").default("member").notNull(),invitedEmail:(0,x.Qq)("invited_email"),inviteAccepted:(0,A.zM)("invite_accepted").default(!1),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()},e=>({uniqMembership:(0,I.ie)({columns:[e.organizationId,e.userId]})})),j=(0,q.K1)(z,e=>{let{one:t}=e;return{organization:t(C,{fields:[z.organizationId],references:[C.id]}),user:t(J,{fields:[z.userId],references:[J.id]})}}),C=(0,v.cJ)("organizations",{id:(0,y.uR)("id").primaryKey().defaultRandom(),name:(0,x.Qq)("name").notNull(),slug:(0,x.Qq)("slug").notNull().unique(),logo:(0,x.Qq)("logo"),website:(0,x.Qq)("website"),billingEmail:(0,x.Qq)("billing_email"),plan:(0,x.Qq)("plan").default("free").notNull(),stripeCustomerId:(0,x.Qq)("stripe_customer_id"),stripeSubscriptionId:(0,x.Qq)("stripe_subscription_id"),stripeSubscriptionStatus:(0,x.Qq)("stripe_subscription_status"),stripePriceId:(0,x.Qq)("stripe_price_id"),subscriptionCurrentPeriodEnd:(0,R.vE)("subscription_current_period_end",{mode:"date"}),cancelAtPeriodEnd:(0,A.zM)("cancel_at_period_end").default(!1),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()}),D=(0,q.K1)(C,e=>{let{many:t}=e;return{members:t(z),integrations:t(K),users:t(J,{relationName:"defaultOrganization"})}}),K=(0,v.cJ)("integrations",{id:(0,y.uR)("id").primaryKey().defaultRandom(),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),organizationId:(0,y.uR)("organization_id").references(()=>C.id,{onDelete:"cascade"}),type:w("type").notNull(),name:(0,x.Qq)("name").notNull(),config:(0,b.Pq)("config").notNull(),isActive:(0,A.zM)("is_active").default(!0).notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull(),lastSyncedAt:(0,R.vE)("last_synced_at",{mode:"date"})}),S=(0,q.K1)(K,e=>{let{one:t}=e;return{user:t(J,{fields:[K.userId],references:[J.id]}),organization:t(C,{fields:[K.organizationId],references:[C.id]})}}),P=(0,v.cJ)("sessions",{id:(0,y.uR)("id").notNull().defaultRandom(),sessionToken:(0,x.Qq)("session_token").primaryKey().unique(),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),expires:(0,R.vE)("expires",{mode:"date"}).notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()}),F=(0,q.K1)(P,e=>{let{one:t}=e;return{user:t(J,{fields:[P.userId],references:[J.id]})}}),J=(0,v.cJ)("users",{id:(0,y.uR)("id").primaryKey().defaultRandom(),name:(0,x.Qq)("name"),email:(0,x.Qq)("email").notNull().unique(),emailVerified:(0,R.vE)("email_verified",{mode:"date"}),image:(0,x.Qq)("image"),password:(0,x.Qq)("password"),role:E("role").default("user").notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull(),defaultOrganizationId:(0,y.uR)("default_organization_id").references(()=>C.id)}),U=(0,q.K1)(J,e=>{let{many:t,one:a}=e;return{accounts:t(T),sessions:t(P),integrations:t(K),organizationMemberships:t(z),defaultOrganization:a(C,{fields:[J.defaultOrganizationId],references:[C.id],relationName:"defaultOrganization"})}}),T=(0,v.cJ)("accounts",{id:(0,y.uR)("id").defaultRandom().notNull().unique(),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),type:(0,x.Qq)("type").$type().notNull(),provider:(0,x.Qq)("provider").notNull(),providerAccountId:(0,x.Qq)("provider_account_id").notNull(),refresh_token:(0,x.Qq)("refresh_token"),access_token:(0,x.Qq)("access_token"),expires_at:(0,h.nd)("expires_at"),token_type:(0,x.Qq)("token_type"),scope:(0,x.Qq)("scope"),id_token:(0,x.Qq)("id_token"),session_state:(0,x.Qq)("session_state"),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()},e=>({compoundKey:(0,I.ie)({columns:[e.provider,e.providerAccountId]})})),M=(0,q.K1)(T,e=>{let{one:t}=e;return{user:t(J,{fields:[T.userId],references:[J.id]})}}),$=(0,v.cJ)("api_tokens",{id:(0,y.uR)("id").primaryKey().defaultRandom(),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),name:(0,x.Qq)("name").notNull(),token:(0,x.Qq)("token").notNull().unique(),expiresAt:(0,R.vE)("expires_at",{mode:"date"}),lastUsedAt:(0,R.vE)("last_used_at",{mode:"date"}),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()}),L=(0,q.K1)($,e=>{let{one:t}=e;return{user:t(J,{fields:[$.userId],references:[J.id]})}}),O=(0,v.cJ)("messages",{id:(0,y.uR)("id").primaryKey().defaultRandom(),conversationId:(0,y.uR)("conversation_id").notNull().references(()=>H.id,{onDelete:"cascade"}),role:(0,x.Qq)("role").notNull(),content:(0,x.Qq)("content").notNull(),tokens:(0,h.nd)("tokens"),modelId:(0,x.Qq)("model_id"),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull()}),B=(0,q.K1)(O,e=>{let{one:t}=e;return{conversation:t(H,{fields:[O.conversationId],references:[H.id]})}}),H=(0,v.cJ)("conversations",{id:(0,y.uR)("id").primaryKey().defaultRandom(),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),organizationId:(0,y.uR)("organization_id").references(()=>C.id,{onDelete:"cascade"}),title:(0,x.Qq)("title").notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull(),lastMessageAt:(0,R.vE)("last_message_at",{mode:"date"}).defaultNow().notNull()}),V=(0,q.K1)(H,e=>{let{one:t,many:a}=e;return{user:t(J,{fields:[H.userId],references:[J.id]}),organization:t(C,{fields:[H.organizationId],references:[C.id]}),messages:a(O)}}),Y=(0,v.cJ)("embeddings",{id:(0,y.uR)("id").primaryKey().defaultRandom(),content:(0,x.Qq)("content").notNull(),embedding:(0,x.Qq)("embedding").notNull(),metadata:(0,b.Pq)("metadata"),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),organizationId:(0,y.uR)("organization_id").references(()=>C.id,{onDelete:"cascade"}),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull()}),G=(0,q.K1)(Y,e=>{let{one:t}=e;return{user:t(J,{fields:[Y.userId],references:[J.id]}),organization:t(C,{fields:[Y.organizationId],references:[C.id]})}});var W=a(18719);let X=(0,v.cJ)("extensions",{id:(0,y.uR)("id").primaryKey().defaultRandom(),name:(0,x.Qq)("name").notNull(),description:(0,x.Qq)("description"),version:(0,x.Qq)("version").notNull(),type:(0,x.Qq)("type").notNull(),author:(0,W.Fx)("author"),entryPoints:(0,W.Fx)("entry_points"),permissions:(0,W.Fx)("permissions"),settings:(0,W.Fx)("settings"),hooks:(0,W.Fx)("hooks"),isActive:(0,A.zM)("is_active").default(!0).notNull(),isSystem:(0,A.zM)("is_system").default(!1).notNull(),installationSource:(0,x.Qq)("installation_source").default("custom").notNull(),organizationId:(0,y.uR)("organization_id").references(()=>C.id,{onDelete:"cascade"}),userId:(0,y.uR)("user_id").references(()=>J.id,{onDelete:"cascade"}),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull(),lastUsedAt:(0,R.vE)("last_used_at",{mode:"date"})}),Z=(0,v.cJ)("extension_marketplace",{id:(0,y.uR)("id").primaryKey().defaultRandom(),name:(0,x.Qq)("name").notNull(),description:(0,x.Qq)("description"),version:(0,x.Qq)("version").notNull(),type:(0,x.Qq)("type").notNull(),author:(0,W.Fx)("author"),entryPoints:(0,W.Fx)("entry_points"),permissions:(0,W.Fx)("permissions"),settings:(0,W.Fx)("settings"),hooks:(0,W.Fx)("hooks"),isVerified:(0,A.zM)("is_verified").default(!1).notNull(),isPublished:(0,A.zM)("is_published").default(!1).notNull(),downloadCount:(0,x.Qq)("download_count").default("0").notNull(),rating:(0,x.Qq)("rating").default("0").notNull(),packageUrl:(0,x.Qq)("package_url").notNull(),iconUrl:(0,x.Qq)("icon_url"),screenshotUrls:(0,W.Fx)("screenshot_urls"),websiteUrl:(0,x.Qq)("website_url"),supportUrl:(0,x.Qq)("support_url"),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull(),publishedAt:(0,R.vE)("published_at",{mode:"date"})}),ee=(0,v.cJ)("extension_storage",{id:(0,y.uR)("id").primaryKey().defaultRandom(),extensionId:(0,y.uR)("extension_id").references(()=>X.id,{onDelete:"cascade"}).notNull(),key:(0,x.Qq)("key").notNull(),value:(0,W.Fx)("value"),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()}),et=(0,v.cJ)("extension_logs",{id:(0,y.uR)("id").primaryKey().defaultRandom(),extensionId:(0,y.uR)("extension_id").references(()=>X.id,{onDelete:"cascade"}).notNull(),level:(0,x.Qq)("level").notNull(),message:(0,x.Qq)("message").notNull(),details:(0,W.Fx)("details"),timestamp:(0,R.vE)("timestamp",{mode:"date"}).defaultNow().notNull()}),ea=(0,v.cJ)("extension_reviews",{id:(0,y.uR)("id").primaryKey().defaultRandom(),extensionMarketplaceId:(0,y.uR)("extension_marketplace_id").references(()=>Z.id,{onDelete:"cascade"}).notNull(),userId:(0,y.uR)("user_id").references(()=>J.id,{onDelete:"cascade"}).notNull(),rating:(0,x.Qq)("rating").notNull(),title:(0,x.Qq)("title"),content:(0,x.Qq)("content"),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()});var en=a(86030),ed=a(51011),ei=a(46055);let el=(0,v.cJ)("metadata",{id:(0,y.uR)("id").primaryKey().defaultRandom(),entityType:(0,en.yf)("entity_type",{length:50}).notNull(),entityId:(0,y.uR)("entity_id").notNull(),key:(0,en.yf)("key",{length:100}).notNull(),value:(0,W.Fx)("value").notNull().$type(),createdAt:(0,R.vE)("created_at").defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at").defaultNow().notNull()},e=>({entityTypeIndex:(0,ed.Pe)("metadata_entity_type_idx").on(e.entityType),entityIdIndex:(0,ed.Pe)("metadata_entity_id_idx").on(e.entityId),keyIndex:(0,ed.Pe)("metadata_key_idx").on(e.key),entityTypeIdKeyIndex:(0,ed.Pe)("metadata_entity_type_id_key_idx").on(e.entityType,e.entityId,e.key)})),es=(0,ei.r)(el),eo=(0,ei.aJ)(el),er=(0,v.cJ)("prompt_templates",{id:(0,y.uR)("id").primaryKey().defaultRandom(),name:(0,x.Qq)("name").notNull(),description:(0,x.Qq)("description"),content:(0,x.Qq)("content").notNull(),variables:(0,b.Pq)("variables").default([]),tags:(0,b.Pq)("tags").default([]),isPublic:(0,A.zM)("is_public").default(!1),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),organizationId:(0,y.uR)("organization_id").references(()=>C.id,{onDelete:"cascade"}),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()}),eu=(0,q.K1)(er,e=>{let{one:t}=e;return{user:t(J,{fields:[er.userId],references:[J.id]}),organization:t(C,{fields:[er.organizationId],references:[C.id]})}}),ec=(0,v.cJ)("slack_event_types",{id:(0,y.uR)("id").primaryKey().defaultRandom(),name:(0,x.Qq)("name").notNull().unique(),description:(0,x.Qq)("description"),category:(0,x.Qq)("category").notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull()}),em=(0,v.cJ)("slack_events",{id:(0,y.uR)("id").primaryKey().defaultRandom(),eventTypeId:(0,y.uR)("event_type_id").references(()=>ec.id,{onDelete:"cascade"}).notNull(),integrationId:(0,y.uR)("integration_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),userId:(0,y.uR)("user_id").references(()=>J.id,{onDelete:"cascade"}),organizationId:(0,y.uR)("organization_id").references(()=>C.id,{onDelete:"cascade"}),slackUserId:(0,x.Qq)("slack_user_id"),slackChannelId:(0,x.Qq)("slack_channel_id"),slackTeamId:(0,x.Qq)("slack_team_id"),timestamp:(0,R.vE)("timestamp",{mode:"date"}).defaultNow().notNull(),metadata:(0,W.Fx)("metadata")}),ep=(0,v.cJ)("slack_usage_metrics",{id:(0,y.uR)("id").primaryKey().defaultRandom(),integrationId:(0,y.uR)("integration_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),organizationId:(0,y.uR)("organization_id").references(()=>C.id,{onDelete:"cascade"}),metricName:(0,x.Qq)("metric_name").notNull(),metricValue:(0,h.nd)("metric_value").notNull(),timeframe:(0,x.Qq)("timeframe").notNull(),startDate:(0,R.vE)("start_date",{mode:"date"}).notNull(),endDate:(0,R.vE)("end_date",{mode:"date"}).notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()}),ef=(0,v.cJ)("slack_user_activity",{id:(0,y.uR)("id").primaryKey().defaultRandom(),integrationId:(0,y.uR)("integration_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),slackUserId:(0,x.Qq)("slack_user_id").notNull(),slackUserName:(0,x.Qq)("slack_user_name"),lastActive:(0,R.vE)("last_active",{mode:"date"}),totalInteractions:(0,h.nd)("total_interactions").default(0).notNull(),commandsUsed:(0,h.nd)("commands_used").default(0).notNull(),messagesReceived:(0,h.nd)("messages_received").default(0).notNull(),messagesSent:(0,h.nd)("messages_sent").default(0).notNull(),reactionsReceived:(0,h.nd)("reactions_received").default(0).notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()}),e_=(0,v.cJ)("slack_channel_activity",{id:(0,y.uR)("id").primaryKey().defaultRandom(),integrationId:(0,y.uR)("integration_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),slackChannelId:(0,x.Qq)("slack_channel_id").notNull(),slackChannelName:(0,x.Qq)("slack_channel_name"),totalInteractions:(0,h.nd)("total_interactions").default(0).notNull(),commandsUsed:(0,h.nd)("commands_used").default(0).notNull(),messagesReceived:(0,h.nd)("messages_received").default(0).notNull(),messagesSent:(0,h.nd)("messages_sent").default(0).notNull(),uniqueUsers:(0,h.nd)("unique_users").default(0).notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at",{mode:"date"}).defaultNow().notNull()}),eN=(0,v.cJ)("slack_ai_performance",{id:(0,y.uR)("id").primaryKey().defaultRandom(),integrationId:(0,y.uR)("integration_id").references(()=>K.id,{onDelete:"cascade"}).notNull(),messageId:(0,x.Qq)("message_id").notNull(),slackUserId:(0,x.Qq)("slack_user_id"),slackChannelId:(0,x.Qq)("slack_channel_id"),promptLength:(0,h.nd)("prompt_length"),responseLength:(0,h.nd)("response_length"),responseTime:(0,h.nd)("response_time"),modelUsed:(0,x.Qq)("model_used"),feedbackRating:(0,h.nd)("feedback_rating"),feedbackComment:(0,x.Qq)("feedback_comment"),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull()}),eg=(0,v.cJ)("usage_records",{id:(0,y.uR)("id").primaryKey().defaultRandom(),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),type:(0,en.yf)("type",{length:50}).notNull(),count:(0,h.nd)("count").notNull(),date:(0,R.vE)("date",{mode:"date"}).defaultNow().notNull(),metadata:(0,b.Pq)("metadata"),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull()}),ev=(0,q.K1)(eg,e=>{let{one:t}=e;return{user:t(J,{fields:[eg.userId],references:[J.id]})}}),ey=(0,v.cJ)("verification_tokens",{identifier:(0,x.Qq)("identifier").notNull(),token:(0,x.Qq)("token").notNull(),expires:(0,R.vE)("expires",{mode:"date"}).notNull(),createdAt:(0,R.vE)("created_at",{mode:"date"}).defaultNow().notNull()},e=>({compoundKey:(0,I.ie)({columns:[e.identifier,e.token]})})),ex=(0,v.cJ)("organization_settings",{id:(0,y.uR)("id").primaryKey().defaultRandom(),organizationId:(0,y.uR)("organization_id").notNull().references(()=>C.id,{onDelete:"cascade"}),defaultIntegrations:(0,W.Fx)("default_integrations").$type(),memberDefaultRole:(0,en.yf)("member_default_role",{length:20}).default("member").notNull(),slackSettings:(0,W.Fx)("slack_settings").$type(),aiSettings:(0,W.Fx)("ai_settings").$type(),createdAt:(0,R.vE)("created_at").defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at").defaultNow().notNull()},e=>({organizationIdIndex:(0,ed.Pe)("organization_settings_organization_id_idx").on(e.organizationId)})),eh=(0,ei.aJ)(ex),eR=(0,ei.r)(ex),eI=(0,v.cJ)("integration_settings",{id:(0,y.uR)("id").primaryKey().defaultRandom(),integrationId:(0,y.uR)("integration_id").notNull().references(()=>K.id,{onDelete:"cascade"}),syncFrequency:(0,en.yf)("sync_frequency",{length:20}).default("hourly").notNull(),syncSettings:(0,W.Fx)("sync_settings").$type(),webhookSettings:(0,W.Fx)("webhook_settings").$type(),apiSettings:(0,W.Fx)("api_settings").$type(),createdAt:(0,R.vE)("created_at").defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at").defaultNow().notNull()},e=>({integrationIdIndex:(0,ed.Pe)("integration_settings_integration_id_idx").on(e.integrationId)})),eq=(0,ei.aJ)(eI),ek=(0,ei.r)(eI),eE=(0,v.cJ)("user_preferences",{id:(0,y.uR)("id").primaryKey().defaultRandom(),userId:(0,y.uR)("user_id").notNull().references(()=>J.id,{onDelete:"cascade"}),theme:(0,en.yf)("theme",{length:20}).default("system").notNull(),timezone:(0,en.yf)("timezone",{length:50}).default("UTC").notNull(),locale:(0,en.yf)("locale",{length:10}).default("en-US").notNull(),notifications:(0,W.Fx)("notifications").notNull().$type().default({email:!0,inApp:!0,marketingEmails:!1,slackMessages:!0}),dashboardLayout:(0,W.Fx)("dashboard_layout").$type(),customization:(0,W.Fx)("customization").$type(),createdAt:(0,R.vE)("created_at").defaultNow().notNull(),updatedAt:(0,R.vE)("updated_at").defaultNow().notNull()},e=>({userIdIndex:(0,ed.Pe)("user_preferences_user_id_idx").on(e.userId)})),eQ=(0,ei.aJ)(eE),ew=(0,ei.r)(eE),eb=(0,v.cJ)("authenticator",{credentialID:(0,x.Qq)("credentialID").notNull().unique(),userId:(0,y.uR)("userId").notNull().references(()=>J.id,{onDelete:"cascade"}),providerAccountId:(0,x.Qq)("providerAccountId").notNull(),credentialPublicKey:(0,x.Qq)("credentialPublicKey").notNull(),counter:(0,h.nd)("counter").notNull(),credentialDeviceType:(0,x.Qq)("credentialDeviceType").notNull(),credentialBackedUp:(0,A.zM)("credentialBackedUp").notNull(),transports:(0,x.Qq)("transports")},e=>[{compositePK:(0,I.ie)({columns:[e.userId,e.credentialID]})}]);var eA=a(49509);(0,g.config)({path:".env"});let ez=(0,N.lw)(eA.env.DATABASE_URL);(0,_.fd)({client:ez,schema:n});function ej(e){return!!e&&"free"!==e}function eC(e){return!!e&&["active","trialing"].includes(e)}var eD=a(19373),eK=a(5041);function eS(e){let{organizationId:t}=e,a=(0,m.n6)(),n=(0,l.useRouter)(),{toast:p}=(0,s.dj)(),[f,_]=(0,i.useState)(!1),{data:N,isLoading:g}=(0,eD.I)(a.organization.getSubscriptionStatus.queryOptions({id:t})),{data:v,isLoading:y}=(0,eD.I)(a.organization.getAvailablePlans.queryOptions()),x=(0,eK.n)(a.organization.createCheckoutSession.mutationOptions({onSuccess:e=>{e.url&&n.push(e.url)},onError:e=>{p({title:"Error",description:e.message||"Failed to create checkout session",variant:"destructive"}),_(!1)}})),h=(0,eK.n)(a.organization.createCustomerPortalSession.mutationOptions({onSuccess:e=>{e.url&&n.push(e.url)},onError:e=>{p({title:"Error",description:e.message||"Failed to create customer portal session",variant:"destructive"}),_(!1)}})),R=async e=>{_(!0),x.mutate({organizationId:t,priceId:e})},I=async()=>{_(!0),h.mutate({organizationId:t})},q=()=>{if(!(null==N?void 0:N.status))return null;let e={active:{label:"Active",variant:"default"},trialing:{label:"Trial",variant:"secondary"},canceled:{label:"Canceled",variant:"destructive"},incomplete:{label:"Incomplete",variant:"outline"},incomplete_expired:{label:"Expired",variant:"destructive"},past_due:{label:"Past Due",variant:"destructive"},unpaid:{label:"Unpaid",variant:"destructive"}}[N.status]||{label:N.status,variant:"outline"};return(0,d.jsx)(u.E,{variant:e.variant,children:e.label})};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)(r.Card,{children:[(0,d.jsxs)(r.CardHeader,{children:[(0,d.jsx)(r.CardTitle,{children:"Subscription"}),(0,d.jsx)(r.CardDescription,{children:"Manage your subscription and billing information"})]}),(0,d.jsx)(r.CardContent,{children:(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-medium",children:"Current Plan"}),(0,d.jsx)("div",{className:"mt-1",children:(()=>{if(g)return(0,d.jsx)(c.E,{className:"h-4 w-24"});let e=(null==N?void 0:N.plan)||"free",t=e.charAt(0).toUpperCase()+e.slice(1);return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{children:t}),q()]})})()}),(()=>{if(g||!(null==N?void 0:N.currentPeriodEnd))return null;let e=new Date(N.currentPeriodEnd);return(0,d.jsx)("div",{className:"text-sm text-muted-foreground",children:N.cancelAtPeriodEnd?"Cancels on ".concat(e.toLocaleDateString()):"Renews on ".concat(e.toLocaleDateString())})})()]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-medium",children:"Billing"}),(0,d.jsx)("div",{className:"mt-1",children:eC(null==N?void 0:N.status)?(0,d.jsx)(o.$,{variant:"outline",onClick:I,disabled:f,children:"Manage Billing"}):(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:"No active subscription"})})]})]})})})]}),(0,d.jsxs)(r.Card,{children:[(0,d.jsxs)(r.CardHeader,{children:[(0,d.jsx)(r.CardTitle,{children:"Available Plans"}),(0,d.jsx)(r.CardDescription,{children:"Choose a plan that works for your team"})]}),(0,d.jsx)(r.CardContent,{children:y?(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsx)(c.E,{className:"h-48 w-full"})}):(0,d.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,d.jsxs)(r.Card,{className:"flex flex-col",children:[(0,d.jsxs)(r.CardHeader,{children:[(0,d.jsx)(r.CardTitle,{children:"Free"}),(0,d.jsx)(r.CardDescription,{children:"For small teams getting started"})]}),(0,d.jsxs)(r.CardContent,{className:"flex-1",children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:"$0"}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground",children:"Forever free"}),(0,d.jsxs)("ul",{className:"mt-4 space-y-2 text-sm",children:[(0,d.jsx)("li",{children:"Up to 3 team members"}),(0,d.jsx)("li",{children:"1 integration"}),(0,d.jsx)("li",{children:"100 requests per month"}),(0,d.jsx)("li",{children:"Basic features"})]})]}),(0,d.jsx)(r.CardFooter,{children:(0,d.jsx)(o.$,{variant:"outline",className:"w-full",disabled:!ej(null==N?void 0:N.plan),onClick:I,children:ej(null==N?void 0:N.plan)?"Downgrade":"Current Plan"})})]}),null==v?void 0:v.map(e=>{var t,a,n;return(0,d.jsxs)(r.Card,{className:"flex flex-col",children:[(0,d.jsxs)(r.CardHeader,{children:[(0,d.jsx)(r.CardTitle,{children:e.name}),(0,d.jsx)(r.CardDescription,{children:e.description||"For growing teams"})]}),(0,d.jsxs)(r.CardContent,{className:"flex-1",children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:(a=e.amount,n=e.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:n.toUpperCase(),minimumFractionDigits:0}).format(a/100))}),(0,d.jsxs)("div",{className:"text-sm text-muted-foreground",children:["per ","month"===e.interval?"month":"year"]}),(0,d.jsx)("ul",{className:"mt-4 space-y-2 text-sm",children:null===(t=e.features)||void 0===t?void 0:t.map((e,t)=>(0,d.jsx)("li",{children:e},t))})]}),(0,d.jsx)(r.CardFooter,{children:(0,d.jsx)(o.$,{className:"w-full",disabled:f||(null==N?void 0:N.plan)===e.name.toLowerCase()&&eC(null==N?void 0:N.status),onClick:()=>R(e.id),children:(null==N?void 0:N.plan)===e.name.toLowerCase()&&eC(null==N?void 0:N.status)?"Current Plan":"Subscribe"})})]},e.id)})]})})]})]})}},42634:()=>{},68856:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var n=a(95155),d=a(59434);function i(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"skeleton",className:(0,d.cn)("bg-primary/10 animate-pulse rounded-md",t),...a})}},72016:()=>{}}]);